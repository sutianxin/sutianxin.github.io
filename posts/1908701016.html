<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Java基础学习（五）-死锁 | Arno</title><meta name="keywords" content="💻后端学习"><meta name="author" content="天昕"><meta name="copyright" content="天昕"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1、死锁1.1、什么是死锁？ 死锁是指在并发环境下，两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。 此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。  1.2、死锁、饥饿和死循环的区别 三者都是由于某种原因导致进程无法顺利向前推进的现象（故意设计的死循环除外）。   死锁   各进程互相等待对"><meta property="og:type" content="article"><meta property="og:title" content="Java基础学习（五）-死锁"><meta property="og:url" content="https://sutianxin.top/posts/1908701016.html"><meta property="og:site_name" content="Arno"><meta property="og:description" content="1、死锁1.1、什么是死锁？ 死锁是指在并发环境下，两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。 此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。  1.2、死锁、饥饿和死循环的区别 三者都是由于某种原因导致进程无法顺利向前推进的现象（故意设计的死循环除外）。   死锁   各进程互相等待对"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204755.jpg"><meta property="article:published_time" content="2021-10-24T12:46:33.000Z"><meta property="article:modified_time" content="2021-10-24T12:51:04.556Z"><meta property="article:author" content="天昕"><meta property="article:tag" content="💻后端学习"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204755.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://sutianxin.top/posts/1908701016"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"top-right"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-10-24 20:51:04"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,a={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(a)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme");"dark"===e?activateDarkMode():"light"===e&&activateLightMode();e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"))})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_1.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/hidescrollbar/hidescrollbar.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_2.css"><link rel="stylesheet" href="/css/cover.css"><link rel="stylesheet" href="/css/copyright.css"><link href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/flipcountdown.css"><link rel="stylesheet" href="/css/year.css"><link rel="stylesheet" href="/css/Lete.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/PaddyLin-xum/wenjian@master/css/fontanimation.css"><link href="https://cdn.bootcdn.net/ajax/libs/botui/0.3.9/botui-theme-default.css" rel="stylesheet"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/twikoo.css"><style>#article-container.post-content h1:before,h2:before,h3:before,h4:before,h5:before,h6:before{-webkit-animation:avatar_turn_around 1s linear infinite;-moz-animation:avatar_turn_around 1s linear infinite;-o-animation:avatar_turn_around 1s linear infinite;-ms-animation:avatar_turn_around 1s linear infinite;animation:avatar_turn_around 1s linear infinite}</style><link rel="stylesheet" href="/css/font.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"></head><body><a href="javascript:void(0);" onclick="preloader.endLoading()" title="点击跳过动画"><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div></a><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">85</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gucheng"></use></svg><span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gushu1"></use></svg><span>文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gushu"></use></svg><span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guwan"></use></svg><span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gujianzhu-01"></use></svg><span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofengwenfangsibaoyantaimoyan_huaban_huaban"></use></svg><span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-red_envelope"></use></svg><span>拓展</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/random/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingbaozhu"></use></svg><span>随机文章</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/adjust/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingguadeng"></use></svg><span>更换背景</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/statistics/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingjiutan"></use></svg><span>文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://sutianxin.gitee.io"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingzhongguojie"></use></svg><span>国内镜像</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingzhuzi"></use></svg><span>导航栏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bb/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxinghulu"></use></svg><span>哔哔</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingshanzi"></use></svg><span>音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaiqiwujiuqijue_huaban_huaban"></use></svg><span>社交</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaileqixun_huaban_huaban_huaban"></use></svg><span>友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaileqibianzhong_huaban_huaban_huaban_huaban"></use></svg><span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guqin"></use></svg><span>关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204755.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Arno</a></span><span id="weather-v2-plugin-simple"></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gucheng"></use></svg><span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gushu1"></use></svg><span>文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gushu"></use></svg><span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guwan"></use></svg><span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gujianzhu-01"></use></svg><span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofengwenfangsibaoyantaimoyan_huaban_huaban"></use></svg><span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-red_envelope"></use></svg><span>拓展</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/random/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingbaozhu"></use></svg><span>随机文章</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/adjust/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingguadeng"></use></svg><span>更换背景</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/statistics/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingjiutan"></use></svg><span>文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://sutianxin.gitee.io"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingzhongguojie"></use></svg><span>国内镜像</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingzhuzi"></use></svg><span>导航栏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bb/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxinghulu"></use></svg><span>哔哔</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xianxingshanzi"></use></svg><span>音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaiqiwujiuqijue_huaban_huaban"></use></svg><span>社交</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaileqixun_huaban_huaban_huaban"></use></svg><span>友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gufengwujianzhongguofenggudaileqibianzhong_huaban_huaban_huaban_huaban"></use></svg><span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guqin"></use></svg><span>关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java基础学习（五）-死锁</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-24T12:46:33.000Z" title="发表于 2021-10-24 20:46:33">2021-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-10-24T12:51:04.556Z" title="更新于 2021-10-24 20:51:04">2021-10-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.4k</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1、死锁"><a href="#1、死锁" class="headerlink" title="1、死锁"></a>1、死锁</h2><h3 id="1-1、什么是死锁？"><a href="#1-1、什么是死锁？" class="headerlink" title="1.1、什么是死锁？"></a>1.1、什么是死锁？</h3><blockquote><p>死锁是指<strong>在并发环境</strong>下，两个或两个以上的进程在执行过程中，由于<strong>竞争资源</strong>或者由于<strong>彼此通信</strong>而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。</p><p>此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。</p></blockquote><h3 id="1-2、死锁、饥饿和死循环的区别"><a href="#1-2、死锁、饥饿和死循环的区别" class="headerlink" title="1.2、死锁、饥饿和死循环的区别"></a>1.2、死锁、饥饿和死循环的区别</h3><blockquote><p><strong>三者都是由于某种原因导致进程无法顺利向前推进的现象</strong>（故意设计的死循环除外）。</p></blockquote><ul><li>死锁</li></ul><blockquote><p>各进程互相等待对方手中的资源，导致出现各个进程都阻塞而无法向前推进的现象。</p></blockquote><ul><li>饥饿</li></ul><blockquote><p><strong>由于长期得不到想要的资源，某进程无法向前推进的现象</strong>。</p><p>比如：在短进程优先算法（SPF）中，若有源源不断的短进程进来，那么会导致长进程一直得不到处理机，从而使长进程处于饥饿状态。</p><p>处理机：<strong>计算机系统中存储程序和数据，并按照程序规定的步骤执行指令的部件</strong>。</p></blockquote><ul><li>死循环</li></ul><blockquote><p><strong>某进程执行过程中一直跳不出某个循环的现象</strong>。</p><p>有时是程序逻辑 BUG 导致的，有时是程序员故意设计的。</p></blockquote><table><thead><tr><th align="center">现象</th><th align="center">区别</th></tr></thead><tbody><tr><td align="center">死锁</td><td align="center">死锁一定是<strong>循环等待对方手中的资源</strong>导致的，因此如果有死锁现象，那么<strong>至少有两个或两个以上的进程同时发生死锁</strong>。另外，<strong>发生死锁的进程一定处于阻塞状态</strong>。</td></tr><tr><td align="center">饥饿</td><td align="center"><strong>可能只有一个进程发生饥饿</strong>。发生饥饿的进程极可能是阻塞态（如长期得不到需要的 I/O 设备），也可以能是就绪态（长期得不到处理机）</td></tr><tr><td align="center">死循环</td><td align="center"><strong>可能只有一个进程发生死循环</strong>。<strong>死循环的进程可以上处理机上运行（可能是运行态）</strong>，只不过无法想期待的那般顺利推进。死锁和饥饿问题是由于操作系统分配资源的策略不合理导致的，而死循环是由代码逻辑的错误导致的。<strong>死锁和饥饿是管理者（操作系统）的问题，而死循环是被管理者的问题</strong>。</td></tr></tbody></table><h3 id="1-3、死锁产生的必要条件"><a href="#1-3、死锁产生的必要条件" class="headerlink" title="1.3、死锁产生的必要条件"></a>1.3、死锁产生的必要条件</h3><blockquote><p>产生死锁必须同时满足以下四个条件，只要其中一个条件不成立，那么死锁就不会发生。</p></blockquote><ul><li>资源互斥条件</li></ul><blockquote><p><strong>只有对必须互斥使用的资源的争抢才会导致死锁</strong>（如哲学家的筷子、打印机设备）。像内存、扬声器这种<strong>可以同时被多个进程使用的资源是不会导致死锁的</strong>（因为进程不用阻塞等待这种资源）。</p></blockquote><ul><li>资源不剥夺条件</li></ul><blockquote><p><strong>进程所获得的资源在没有使用完之前，不能由其他进程强行夺走，只能主动释放</strong></p></blockquote><ul><li>请求和保持条件</li></ul><blockquote><p><strong>进程已经保持了至少一个资源</strong>，但<strong>又提出了新的资源请求</strong>，而<strong>请求的资源此时又被其他进程占有</strong>，此时请求进程被阻塞，但又<strong>对自己已有的资源保持不放</strong></p></blockquote><ul><li>循环等待条件</li></ul><blockquote><p><strong>存在一种进程资源的循环等待链，链中的每一个进程已获得的资源同时被下一个进程所请求</strong></p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204344.png" alt="image-20211018145616690"></p><blockquote><p>这里需要注意：<strong>发生死锁时一定有资源的循环等待对象，但是发生资源循环等待现象时不一定会产生死锁</strong>。（循环等待是死锁的必要不充分条件）</p><p><strong>如果同类资源数大于 1 ，那么即使有循环等待，也未必发生死锁，但如果系统中每类资源都只有一个，那循环等待就是死锁的充分必要条件了</strong></p><p>代入到上面的情景中，如果此时有一个在圈外的六号哲学家也持有一根筷子，同时三号哲学家既在等待 4 号的筷子，也在等待 6 号的筷子，当 6 号放下筷子时， 3 号就可以拿到 6 号的筷子然后向下推进，此时虽然有循环等待，但没有出现死锁。</p></blockquote><h3 id="1-4、什么时候会发生死锁"><a href="#1-4、什么时候会发生死锁" class="headerlink" title="1.4、什么时候会发生死锁"></a>1.4、什么时候会发生死锁</h3><blockquote><p><strong>对不可剥夺资源的不合理分配，可能导致死锁</strong>。</p></blockquote><ul><li>对系统中不可剥夺的资源的竞争</li></ul><blockquote><p><strong>各进程对不可剥夺的资源（如打印机）的竞争可能引起死锁</strong>，对可剥夺的资源（CPU）的竞争是不会引起死锁的。</p></blockquote><ul><li>进程推进顺序非法</li></ul><blockquote><p><strong>请求和释放资源的顺序不当，也会导致死锁</strong>。</p><p>假如并发执行的两个进程 P1 和 P2 分别申请并占有了资源 R1 和 R2 ，之后进程 P1 又申请了资源 R2 ，而进程 P2 又申请了资源 R1 ，此时两者会因为申请的资源被对方占用而阻塞，从而发生死锁。</p></blockquote><ul><li>信号量的使用不当也会造成死锁</li></ul><h3 id="1-5、死锁的处理策略"><a href="#1-5、死锁的处理策略" class="headerlink" title="1.5、死锁的处理策略"></a>1.5、死锁的处理策略</h3><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204345.png" alt="image-20211018163819450"></p><ul><li>预防死锁</li></ul><blockquote><p>破坏死锁产生的四个必要条件中的一个或者几个。</p></blockquote><ul><li>避免死锁</li></ul><blockquote><p>用某种方法防止系统进入不安全状态，从而避免死锁（银行家算法）</p></blockquote><ul><li>死锁的检测和解除</li></ul><blockquote><p>允许死锁的发生，不过操作系统会负责检测出死锁的发生，然后采取某些措施解除死锁。</p></blockquote><h2 id="2、死锁的处理策略-–-预防死锁"><a href="#2、死锁的处理策略-–-预防死锁" class="headerlink" title="2、死锁的处理策略 – 预防死锁"></a>2、死锁的处理策略 – 预防死锁</h2><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204346.png" alt="image-20211018163718782"></p><h3 id="2-1、破坏互斥条件"><a href="#2-1、破坏互斥条件" class="headerlink" title="2.1、破坏互斥条件"></a>2.1、破坏互斥条件</h3><blockquote><p><strong>可以将只能互斥使用的资源改造为允许共享使用，则系统不会进入死锁状态</strong>。</p><p>比如：<strong>SPOOLing 技术</strong>，操作系统可以采用<strong>SPOOLing 技术</strong>把独占设备在逻辑上改造成共享设备（将打印机改造为共享设备…）</p></blockquote><ol><li>使用<strong>SPOOLing 技术</strong>之前</li></ol><blockquote><p>在使用<strong>SPOOLing 技术</strong>之前，如果进程 1 先抢到了打印机的使用权，那么在进程 1 使用完打印机之前，进程 2 申请使用打印机时会被阻塞</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204347.png" alt="image-20211018153745579"></p><ol start="2"><li>使用<strong>SPOOLing 技术</strong>之后</li></ol><blockquote><p>在使用<strong>SPOOLing 技术</strong>之后，进程 1 和进程 2 分别将请求发送到输出进程中，然后就可以继续执行自己下面的逻辑了，在它们看来，在将请求输出到<strong>输出进程</strong>后，自己对打印机资源的使用请求就立即被接收处理了，不需要再阻塞等待。</p><p>输出进程接收到两个进程的请求后，会将请求排队，然后依次送达到打印机中进行工作。</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204348.png" alt="image-20211018154020172"></p><blockquote><p>该策略的<strong>缺点</strong>：<strong>并不是所有资源都可以改造成可共享使用的资源</strong>。并且为了系统安全，很多地方还必须保护这种互斥性，因此，<strong>很多时候都无法破坏互斥条件</strong>。</p></blockquote><h3 id="2-2、破坏不剥夺条件"><a href="#2-2、破坏不剥夺条件" class="headerlink" title="2.2、破坏不剥夺条件"></a>2.2、破坏不剥夺条件</h3><ul><li>方案一：得不到就放手</li></ul><blockquote><p>当某个进程请求新资源得不到满足时，它必须立即释放保持的所有资源，待以后需要时再重新申请。也就是说，即使某些资源尚未使用完，也需要主动释放，从而破坏了不可剥夺条件。</p></blockquote><ul><li>方案二：我找人帮我抢过来</li></ul><blockquote><p>当某个进程需要的资源被其他进程占有时，可以由操作系统协助，将想要的资源强行剥夺。这种方式一般需要考虑各进程的优先级。（比如：剥夺调度方式，就是将处理机资源强行剥夺给优先级更高的进程使用）</p></blockquote><ul><li>缺点</li></ul><ol><li>这种方案实现起来比较复杂</li><li>同时释放已获得的资源可能会造成前一阶段工作的失效，**因此这种方法一般只适用于易保存和恢复状态的资源，如 CPU **</li><li>反复地申请和释放资源会增加系统开销，降低系统吞吐量。</li><li>如果采用方案一，那么意味着只要暂时得不到某个资源，之前获取的那些资源就需要全部放弃，以后再重新申请，如果一直发生这种情况，那么就会导致进程饥饿</li></ol><h3 id="2-3、破坏请求和保持条件"><a href="#2-3、破坏请求和保持条件" class="headerlink" title="2.3、破坏请求和保持条件"></a>2.3、破坏请求和保持条件</h3><blockquote><p>可以采用<strong>静态分配方法</strong>来破坏这个条件，即<strong>进程在运行前一次申请完它所需要的全部资源</strong>，在它所需要的资源没有得到满足前，不让它投入运行。</p><p><strong>一旦投入运行后，这些资源就一直归它所有，该进程就不会再请求别的任何资源了</strong>。</p></blockquote><ol><li>优点：实现起来简单</li><li>缺点</li></ol><blockquote><p>有些资源可能只需要用很短的时间，因此如果在整个进程的运行期间都保持着所有资源，那么就会造成严重的资源浪费，<strong>资源利用率极低</strong>。另外，该策略也<strong>可能导致某些进程饥饿</strong>。</p></blockquote><h3 id="2-4、破坏循环等待条件"><a href="#2-4、破坏循环等待条件" class="headerlink" title="2.4、破坏循环等待条件"></a>2.4、破坏循环等待条件</h3><blockquote><p>可以采用<strong>顺序资源分配法</strong>来破坏这个条件，首先给系统中的资源编号，规定每个进程<strong>必须按编号递增的顺序来请求资源</strong>，同类资源（编号相同的资源）需要一次性申请完。</p></blockquote><ul><li>原理分析</li></ul><blockquote><p><strong>一个进程只有已占有小编号资源时，可有资格申请更大编号的资源</strong>。按照这个规则，<strong>已持有大编号资源的进程不可能逆向地回来申请小编号的资源</strong>，从而就不会产生循环等待的现象。</p></blockquote><ul><li>缺点</li></ul><ol><li><p>不方便增加新的设备，因为可能需要重新分配所有的编号</p></li><li><p>进程实际使用资源的而顺序可能和编号递增的顺序不一致，会导致资源浪费</p></li></ol><blockquote><p>比如说一个进程需要先用到打印机（7号），然后用到扫描仪（5号），但由于打印机编号大于扫描仪，所以该进程只能先申请扫描仪，然后申请打印机，这也就造成了资源浪费。</p></blockquote><ol start="3"><li>必须按照规定次序申请资源，用户编程麻烦</li></ol><h2 id="3、死锁的处理策略-–-避免死锁"><a href="#3、死锁的处理策略-–-避免死锁" class="headerlink" title="3、死锁的处理策略 – 避免死锁"></a>3、死锁的处理策略 – 避免死锁</h2><h3 id="3-1、什么是安全序列？"><a href="#3-1、什么是安全序列？" class="headerlink" title="3.1、什么是安全序列？"></a>3.1、什么是安全序列？</h3><ul><li>所谓安全序列，就是指<strong>系统如果按照这种序列分配资源，则每个进程都能顺利完成</strong>。</li></ul><blockquote><p>只要能找出一个安全序列，系统就是安全状态。当然，<strong>安全序列可以有多个</strong>。</p></blockquote><ul><li>如果分配了资源后，系统中再也找不到任何一个安全序列，此时系统就进入了一个<strong>不安全状态</strong>。</li></ul><blockquote><p>这意味着之后<strong>可能</strong>所有进程都无法顺利地执行下去。当然，如果此时有进程提前归还了一些资源，那系统也<strong>有可能重新回到安全状态</strong>，但我们在分配资源之前总是要考虑到最坏的情况。</p></blockquote><ul><li>如果系统处于<strong>安全状态</strong>，就<strong>一定不会发生死锁</strong>；如果系统进入<strong>不安全状态</strong>，就<strong>可能发生死锁</strong>。</li></ul><blockquote><p>处于不安全状态未必就是发生了死锁，但发生死锁时一定是在不安全状态。</p></blockquote><ul><li>因此<strong>可以在资源分配之前预先判断这次分配是否会导致系统进入不安全状态，以此决定是否答应资源的分配请求</strong>，这也是<strong>银行家算法</strong>的核心思想。</li></ul><h3 id="3-2、求解一个安全序列"><a href="#3-2、求解一个安全序列" class="headerlink" title="3.2、求解一个安全序列"></a>3.2、求解一个安全序列</h3><ul><li>求解一个安全序列的过程</li></ul><ol><li>假设现在有 5 个进程，其最大需求、已分配需求和最多还需要资源情况如下表，计算机中存在三种资源 R0 - R2 ，初始数量为 (10,5,7)</li></ol><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204349.png" alt="image-20211018170550554"></p><ol start="2"><li>根据初始资源和可分配资源计算出计算机当前剩余可用资源为 (10,5,7) - (7,2,5) = (3,3,2)</li></ol><blockquote><p>其中 (7,2,5) 为计算机已经为上面 5 个进程分配的资源</p></blockquote><ol start="3"><li>依次检查剩余可用资源是否能满足各进程的需求</li></ol><blockquote><p>查看上表，发现剩余可用资源无法满足 P0 需求，但可以满足 P1 需求，此时将 P1 加入安全序列，在 P1 结束后，P1 释放自己的资源，此时更新剩余可用资源为 (5,3,2)，同时将 P1 从进程表中抹去</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204350.png" alt="image-20211018170918012"></p><ol start="4"><li>依次检查剩余可用资源(5,3,2)是否能满足剩余进程（不包括已加入到安全序列的进程）的需求</li></ol><blockquote><p>此时发现剩余可用资源无法满足进程 P0 和 P2 的需求，但可以满足进程 P3 的需求，所以将资源分配给 P3 ，更新剩余可用资源为 (7,4,3) ，将 P3 加入到安全序列，同时在表中抹去 P3 ，此时安全序列为 {P1,P3}</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204351.png" alt="image-20211018171242933"></p><ol start="5"><li>以此类推，共五轮循环检查即可将 5 个进程都加入到安全序列中，最后得到一个安全序列。</li></ol><blockquote><p><strong>这种算法称为安全性算法</strong>，可以很方便地用代码实现以上流程，每一轮检查都从编号较小的进程开始检查，实际做题时可以更快速地得到序列。</p></blockquote><h3 id="3-3、银行家算法"><a href="#3-3、银行家算法" class="headerlink" title="3.3、银行家算法"></a>3.3、银行家算法</h3><ul><li>假设系统中存在 n 个进程，m 种资源</li></ul><blockquote><p>每个进程在运行前可以声明自己对各种资源的最大需求数，可以用一个 n * m 的矩阵（用二维数组实现）表示所有进程对各种资源的最大需求数，称为最大需求矩阵 Max。</p><p>Max[i,j] = k 表示进程 Pi 最多需要 K 个 Rj 资源。</p></blockquote><ul><li>系统用一个 n * m 的分配矩阵 Allocation 表示对所有进程的资源分配情况</li></ul><blockquote><p>Allocation[i,j] = k 表示系统已经在 Pi 个进程分配了 K 个 Rj 资源</p></blockquote><ul><li>Max - Allocation 可以得到一个 n * m 的 Need 矩阵，用一个长度为 m 的一维数组 Available 来表示当前系统中还有多少可用资源；</li></ul><blockquote><p>Need[i,j] = need 表示进程 Pi 还需要 need 个 Rj 资源</p></blockquote><ul><li>某进程 Pi 向系统申请资源时，可以用一个长度为 m 的一维数组 Request 表示本次申请的各种资源量</li></ul><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204352.png" alt="image-20211018172351003"></p><ul><li><strong>银行家算法可以用来预判本次分配会不会导致系统进入不安全状态</strong></li></ul><ol><li>如果 Request<sub>i</sub>[j] &lt;= Need[i,j] (0 &lt;= j &lt;= m)，便转向 2 ；否则认为出错</li></ol><blockquote><p>如果 Pi 进程要求的资源没有超过它最多需要的资源数量的话，那么可以继续进行，否则认为出错（因为它所需要的资源超过它所宣布的最大值）</p></blockquote><ol start="2"><li>如果 Request<sub>i</sub>[j] &lt;= Available[i,j] ，转向 3 ；否则表示尚无足够资源，进程 Pi 必须等待</li><li>系统<strong>试探</strong>着将资源分配给进程 Pi ，并修改相应的数据（<strong>并非真的分配，而是修改数值进行预判</strong>）</li></ol><blockquote><p>Available = Available - Request;</p><p>Allocation[i,j] = Allocation[i,j] + Request<sub>i</sub>[j]</p><p>Need[i,j] = Need[i,j] - Request<sub>i</sub>[j]</p></blockquote><ol start="4"><li>操作系统执行<strong>安全性算法</strong>，检查本次资源分配后，<strong>系统是否处于安全状态</strong>，如果安全，才正式分配；否则，恢复相应数据并让进程阻塞等待</li></ol><ul><li>综上，银行家算法步骤可以总结为以下几个步骤</li></ul><ol><li>检查此次申请是否超过之前声明的最大需求数</li><li>检查此时系统剩余可用资源是否还能满足这次请求</li><li>试探着分配，更改各数据结构</li><li>用安全性算法检查此次分配是否会导致系统进入不安全状态</li></ol><blockquote><p>安全性算法步骤：检查当前的剩余可用资源是否能满足某个进程的最大需求，如果可以，就把该进程加入到安全序列中，并把该进程持有的资源全部回收，不断重复上述过程，看最终能否让所有进程都加入到安全序列。</p></blockquote><h2 id="4、死锁的处理策略-–-检测和解除"><a href="#4、死锁的处理策略-–-检测和解除" class="headerlink" title="4、死锁的处理策略 – 检测和解除"></a>4、死锁的处理策略 – 检测和解除</h2><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204353.png" alt="image-20211018193605373"></p><blockquote><p>如果系统中既不采取预防死锁的措施，也不采取避免死锁的措施，系统就很<strong>可能发生死锁</strong>。在这种情况下，系统应当提供两个算法：</p></blockquote><ol><li>死锁检测算法</li></ol><blockquote><p>用于检测系统状态，以确定系统中是否发生死锁</p></blockquote><ol start="2"><li>死锁解除算法</li></ol><blockquote><p>当认定系统中已经发生了死锁，利用该算法可将系统从死锁状态中解脱出来。</p></blockquote><h3 id="4-1、死锁的检测"><a href="#4-1、死锁的检测" class="headerlink" title="4.1、死锁的检测"></a>4.1、死锁的检测</h3><ol><li><p>用<strong>某种数据结构</strong>来保存资源的请求和分配信息；</p></li><li><p>提供<strong>一种算法</strong>，利用上述信息来检测系统是否进入了死锁状态。</p></li></ol><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204354.png" alt="image-20211018174522739"></p><ul><li>资源节点和进程节点</li><li>请求边和分配边</li></ul><ol><li>从进程指向资源的有向边称为请求边，n 条请求边代表该进程向系统请求 n 个该类型资源</li><li>从资源指向进程的有向边称为分配边，n 条分配边代表这种资源已经分配了 n 个给该进程</li></ol><blockquote><p>在下图中，我们可以得到的信息是：P1 已经的已获得两个 R1 资源，正在请求一个 R2 资源；而 P2 获得了一个 R2 资源和一个 R1 资源，此时正在请求一个 R1 资源</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204355.png" alt="image-20211018175113383"></p><ul><li><p>如果系统中剩余的可用资源数足够满足进程的需求，那么这个进程暂时不会阻塞，可以顺利地执行下去；</p></li><li><p>如果这个资源执行结束了将资源归还系统，就可以使某些正在被等待的进程被激活，并顺利的执行下去。</p></li></ul><blockquote><p>在上面的图中，如果将剩余的资源分配 P1 ，在 P1 结束并释放资源后， P2 就可以拿到 P1 释放的资源并继续进行下去</p><p>相应的，这些被激活的进程（P2）执行完之后又会归还一些资源，这样可能又会激活另外一些阻塞的进程…</p></blockquote><ul><li>如果按照上述过程分析，最终可以<strong>消除所有边</strong>，我们就称这个图是<strong>可完全简化的</strong>，此时<strong>一定没有发生死锁</strong>（相当于可以找到一个安全序列）</li><li>如果最终<strong>不能消除所有边</strong>，那么此时就是<strong>发生了死锁</strong></li></ul><blockquote></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204356.png" alt="image-20211018181210374"></p><ol><li>分配给 P3 一个 R2 资源，P3 执行完毕后归还资源，此时还剩下一个 R2 资源和 0 个 R1 资源</li><li>此时 P2 请求一个 R1 资源，而 P1 请求两个 R2 资源，由于此时剩余的资源无法满足剩下进程的需求，所以进程 P1 和 P2 均阻塞，这样就发生了死锁</li></ol><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204357.png" alt="image-20211018181619082"></p><ul><li><strong>最终还连着边的那些进程就是处于死锁状态的进程</strong>。</li></ul><blockquote><p>在上面的例子中，最终还连着边的 P1 和 P2 进程处于死锁状态</p></blockquote><h3 id="4-2、死锁的解除"><a href="#4-2、死锁的解除" class="headerlink" title="4.2、死锁的解除"></a>4.2、死锁的解除</h3><blockquote><p>一旦检测出死锁的发生，就应该立即解除死锁，但不是系统中的所有进程都是死锁状态，<strong>只有那些用死锁检测算法化简资源分配图后，还连着边的那些进程才是死锁进程</strong>。</p><p>解除死锁主要有以下几种方法</p></blockquote><ul><li>资源剥夺法</li></ul><blockquote><p>挂起（暂时放到外存上）某些<strong>死锁进程，并抢夺它的资源，将这些资源分配给其他的死锁线程</strong>。但是应防止被挂起的线程长时间得不到资源而饥饿。</p><p>在上面出现的图中，我们可以通过剥夺一些死锁进程（比如说 P1 或者 P2 ）的资源来解除死锁</p></blockquote><ul><li>撤销进程法（或称终止进程法）</li></ul><blockquote><p><strong>强制撤销部分、甚至是全部死锁进程，并剥夺这些进程的资源</strong>。</p><p>这种方式的优点是实现简单，但付出的代价可能很大。因为有些进程可能已经运行了很长时间，已经接近结束了，一旦被终止可能功亏一篑，以后还得从头再来。</p></blockquote><ul><li>进程回退法</li></ul><blockquote><p><strong>让一个或多个进程回退到足以避免死锁的地步</strong>，这就要求系统要记录进程的历史信息，设置还原点。</p></blockquote><h3 id="4-3、选择对哪个进程下手以解除死锁"><a href="#4-3、选择对哪个进程下手以解除死锁" class="headerlink" title="4.3、选择对哪个进程下手以解除死锁"></a>4.3、选择对哪个进程下手以解除死锁</h3><blockquote><p>我们可以综合以下几个因素来考虑要对哪个进程下手，从而解除死锁</p></blockquote><ul><li>进程优先级，选择优先级较低的进程</li><li>进程已执行的时间，选择已执行时间较短的进程</li><li>进程的完成度，还需要多久时间才能完成</li></ul><blockquote><p>对完成度较低的进程下手，然后将资源分配给那些快要执行完成的进程，以实现资源的快速释放</p></blockquote><ul><li>进程当前占用资源的情况</li></ul><blockquote><p>如果一个进程当前占用的资源十分多，那么对这个进程下手就可以释放更多的资源，让更多的进程继续进行工作</p></blockquote><ul><li>进程是交互式的还是批处理式的</li></ul><blockquote><p>如果进程是交互式的，那么将这一类进程停掉可能会影响用户体验；如果是批处理式的进程，那么用户对这个进程的结束可能不会得到及时反馈，所以我们可以优先结束那些批处理的进程。</p></blockquote></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Java基础学习（五）-死锁</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://sutianxin.top/posts/1908701016.html">https://sutianxin.top/posts/1908701016.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display:inline-block;width:120px"><h>作者</h><div class="post-copyright-cc-info"><h>天昕</h></div></div><div class="post-copyright-c" style="display:inline-block;width:120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-10-24</h></div></div><div class="post-copyright-u" style="display:inline-block;width:120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2021-10-24</h></div></div><div class="post-copyright-c" style="display:inline-block;width:120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%F0%9F%92%BB%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/">💻后端学习</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024204755.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/4114983771.html"><img class="prev-cover" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211024205022.jpg" onerror='onerror=null,src="https://gitee.com/sutianxin/blogImage/raw/master/20210430103138.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据结构与算法学习（十七）-负载均衡算法</div></div></a></div><div class="next-post pull-right"><a href="/posts/3294271888.html"><img class="next-cover" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/img/20211023201110.jpg" onerror='onerror=null,src="https://gitee.com/sutianxin/blogImage/raw/master/20210430103138.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据结构与算法学习（十六）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/1128227004.html" title="Java应用学习（七）-回顾Mybatis和Spring MVC"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/20210430102830.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-27</div><div class="title">Java应用学习（七）-回顾Mybatis和Spring MVC</div></div></a></div><div><a href="/posts/2938255980.html" title="Java应用学习（二）-Springboot整合swagger/swagger-Bootstrap-UI使用"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210208120213.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-12</div><div class="title">Java应用学习（二）-Springboot整合swagger/swagger-Bootstrap-UI使用</div></div></a></div><div><a href="/posts/2005124203.html" title="Redis学习手册（一）--NoSQL、redis入门及基本数据类型"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210208174445.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-03</div><div class="title">Redis学习手册（一）--NoSQL、redis入门及基本数据类型</div></div></a></div><div><a href="/posts/913123791.html" title="Spring Cloud学习（七）-Spring Cloud Config"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/20210516192228.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-16</div><div class="title">Spring Cloud学习（七）-Spring Cloud Config</div></div></a></div><div><a href="/posts/2863462089.html" title="Spring Cloud学习（二）-OpenFeign微服务调用"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/blogImage/raw/master/20210504192527.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-11</div><div class="title">Spring Cloud学习（二）-OpenFeign微服务调用</div></div></a></div><div><a href="/posts/995752607.html" title="Spring Cloud学习（四）-Eureka服务注册中心"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210214225250.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-14</div><div class="title">Spring Cloud学习（四）-Eureka服务注册中心</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%AD%BB%E9%94%81"><span class="toc-text">1、死锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81%EF%BC%9F"><span class="toc-text">1.1、什么是死锁？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E6%AD%BB%E9%94%81%E3%80%81%E9%A5%A5%E9%A5%BF%E5%92%8C%E6%AD%BB%E5%BE%AA%E7%8E%AF%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">1.2、死锁、饥饿和死循环的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81%E6%AD%BB%E9%94%81%E4%BA%A7%E7%94%9F%E7%9A%84%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6"><span class="toc-text">1.3、死锁产生的必要条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%8F%91%E7%94%9F%E6%AD%BB%E9%94%81"><span class="toc-text">1.4、什么时候会发生死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5"><span class="toc-text">1.5、死锁的处理策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5-%E2%80%93-%E9%A2%84%E9%98%B2%E6%AD%BB%E9%94%81"><span class="toc-text">2、死锁的处理策略 – 预防死锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E7%A0%B4%E5%9D%8F%E4%BA%92%E6%96%A5%E6%9D%A1%E4%BB%B6"><span class="toc-text">2.1、破坏互斥条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E7%A0%B4%E5%9D%8F%E4%B8%8D%E5%89%A5%E5%A4%BA%E6%9D%A1%E4%BB%B6"><span class="toc-text">2.2、破坏不剥夺条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E7%A0%B4%E5%9D%8F%E8%AF%B7%E6%B1%82%E5%92%8C%E4%BF%9D%E6%8C%81%E6%9D%A1%E4%BB%B6"><span class="toc-text">2.3、破坏请求和保持条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81%E7%A0%B4%E5%9D%8F%E5%BE%AA%E7%8E%AF%E7%AD%89%E5%BE%85%E6%9D%A1%E4%BB%B6"><span class="toc-text">2.4、破坏循环等待条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5-%E2%80%93-%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81"><span class="toc-text">3、死锁的处理策略 – 避免死锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%89%E5%85%A8%E5%BA%8F%E5%88%97%EF%BC%9F"><span class="toc-text">3.1、什么是安全序列？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81%E6%B1%82%E8%A7%A3%E4%B8%80%E4%B8%AA%E5%AE%89%E5%85%A8%E5%BA%8F%E5%88%97"><span class="toc-text">3.2、求解一个安全序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95"><span class="toc-text">3.3、银行家算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5-%E2%80%93-%E6%A3%80%E6%B5%8B%E5%92%8C%E8%A7%A3%E9%99%A4"><span class="toc-text">4、死锁的处理策略 – 检测和解除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E6%A3%80%E6%B5%8B"><span class="toc-text">4.1、死锁的检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E6%AD%BB%E9%94%81%E7%9A%84%E8%A7%A3%E9%99%A4"><span class="toc-text">4.2、死锁的解除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81%E9%80%89%E6%8B%A9%E5%AF%B9%E5%93%AA%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%B8%8B%E6%89%8B%E4%BB%A5%E8%A7%A3%E9%99%A4%E6%AD%BB%E9%94%81"><span class="toc-text">4.3、选择对哪个进程下手以解除死锁</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 <i style="color:#ff6a6a;animation:announ_animation .8s linear infinite" class="fa fa-heartbeat"></i> 天昕</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到我的个人博客!<span id="runtime"></span><br></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender"></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr"></a><a class="github-badge" target="_blank" href="https://gitee.com/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Picture-Gitee-0cedbe?style=flat&amp;logo=Gitee"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris"></a></p><div id="workboard"></div><script async src="/js/runtime.js"></script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><script defer src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script defer src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=document.getElementById("twikoo-count"),o=()=>{twikoo.init({el:"#twikoo-wrap",envId:"blogcomments-2gseqioe1aa55c8c",region:"ap-shanghai"})},e=()=>{twikoo.getCommentsCount({envId:"blogcomments-2gseqioe1aa55c8c",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then(function(o){t.innerText=o[0].count}).catch(function(o){console.error(o)})};var n;n=!0,"object"==typeof twikoo?(o(),n&&t&&setTimeout(e,0)):getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(()=>{o(),n&&t&&setTimeout(e,0)})})()</script></div><div class="aplayer no-destroy" data-id="6588965546" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="none" data-autoplay="false" data-lrctype="0" muted></div><script defer src="/live2d-widget/autoload.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/flipcountdown.js"></script><script data-pjax src="/js/runtime.js"></script><script async src="//at.alicdn.com/t/font_2398185_yegv7kt2bj.js"></script><script src="https://apip.weatherdt.com/simple/static/js/weather-simple-common.js?v=2.0"></script><script src="/js/weather.js"></script><script src="/js/custom/runtime.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/hidescrollbar/hidescrollbar.js"></script><script async src="//at.alicdn.com/t/font_2398185_lld84dtfbb.js"></script><script src="https://www.luckyclover.top/rain.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/shuoshuo/"]):not([href="/bb/"]):not([href="/contact/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax], .pjax-reload script").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()}),document.addEventListener("pjax:send",function(){if("object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script></div><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.10/hexo_githubcalendar.js"></script><script data-pjax>function GithubCalendarConfig(){var e=document.getElementById("recent-posts");e&&e.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_container"></div></div>'),GithubCalendar("https://python-github-calendar-api.vercel.app/api?sutianxin",["#ebedf0","#f1f8ff","#dbedff","#c8e1ff","#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],"sutianxin")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:120px}}</style></body></html>
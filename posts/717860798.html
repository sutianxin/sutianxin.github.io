<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆå…­ï¼‰-HashMapæºç è§£è¯» | Alexios</title><meta name="keywords" content="â˜•Java,ğŸ’»åç«¯å­¦ä¹ "><meta name="author" content="å¤©æ˜•"><meta name="copyright" content="å¤©æ˜•"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹HashMapçš„åº•å±‚æºç ï¼Œç°åœ¨æ•´ç†ä¸€ä¸‹ç¬”è®°ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆå…­ï¼‰-HashMapæºç è§£è¯»"><meta property="og:url" content="https://sutianxin.gitee.io/posts/717860798.html"><meta property="og:site_name" content="Alexios"><meta property="og:description" content="æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹HashMapçš„åº•å±‚æºç ï¼Œç°åœ¨æ•´ç†ä¸€ä¸‹ç¬”è®°ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218195324.jpg"><meta property="article:published_time" content="2021-02-18T11:47:06.000Z"><meta property="article:modified_time" content="2021-02-18T15:37:54.965Z"><meta property="article:author" content="å¤©æ˜•"><meta property="article:tag" content="â˜•Java"><meta property="article:tag" content="ğŸ’»åç«¯å­¦ä¹ "><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218195324.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://sutianxin.gitee.io/posts/717860798"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-02-18 23:37:54"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_1.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_2.css"><link rel="stylesheet" href="/css/cover.css"><link rel="stylesheet" href="/css/copyright.css"><link href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/flipcountdown.css"><link rel="stylesheet" href="/css/year.css"><link rel="stylesheet" href="/css/Lete.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/PaddyLin-xum/wenjian@master/css/fontanimation.css"><link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link href="https://cdn.bootcdn.net/ajax/libs/botui/0.3.9/botui-theme-default.css" rel="stylesheet"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/iconfont.css"><meta name="generator" content="Hexo 5.3.0"></head><body><a href="javascript:void(0);" onclick="preloader.endLoading()" title="ç‚¹å‡»è·³è¿‡åŠ¨ç”»"><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div></a><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">32</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home faa-wrench animated"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa fa-book faa-pulse animated"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw far fa-calendar-alt faa-wrench animated"></i><span> å½’æ¡£</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags faa-rising animated"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open faa-rising animated"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane faa-horizontal animated"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat faa-pulse animated"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/random/"><i class="fa-fw fa fa-spinner faa-spin animated"></i><span> éšæœºæ–‡ç« </span></a></li><li><a class="site-page" href="/adjust/"><i class="fa-fw fa fa-cog faa-spin animated"></i><span> æ›´æ¢èƒŒæ™¯</span></a></li><li><a class="site-page" href="/statistics/"><i class="fa-fw fa fa-cubes faa-pulse animated"></i><span> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-volume-up faa-pulse animated"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link faa-spin animated"></i><span> å‹é“¾</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218195324.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Alexios</a></span><span id="weather-v2-plugin-simple"></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home faa-wrench animated"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa fa-book faa-pulse animated"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw far fa-calendar-alt faa-wrench animated"></i><span> å½’æ¡£</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags faa-rising animated"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open faa-rising animated"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane faa-horizontal animated"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat faa-pulse animated"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/random/"><i class="fa-fw fa fa-spinner faa-spin animated"></i><span> éšæœºæ–‡ç« </span></a></li><li><a class="site-page" href="/adjust/"><i class="fa-fw fa fa-cog faa-spin animated"></i><span> æ›´æ¢èƒŒæ™¯</span></a></li><li><a class="site-page" href="/statistics/"><i class="fa-fw fa fa-cubes faa-pulse animated"></i><span> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-volume-up faa-pulse animated"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link faa-spin animated"></i><span> å‹é“¾</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆå…­ï¼‰-HashMapæºç è§£è¯»</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-02-18T11:47:06.000Z" title="å‘è¡¨äº 2021-02-18 19:47:06">2021-02-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-02-18T15:37:54.965Z" title="æ›´æ–°äº 2021-02-18 23:37:54">2021-02-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">6k</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1ã€é›†åˆå®¹å™¨"><a href="#1ã€é›†åˆå®¹å™¨" class="headerlink" title="1ã€é›†åˆå®¹å™¨"></a>1ã€é›†åˆå®¹å™¨</h2><h3 id="1-1ã€æ¦‚è¿°"><a href="#1-1ã€æ¦‚è¿°" class="headerlink" title="1.1ã€æ¦‚è¿°"></a>1.1ã€æ¦‚è¿°</h3><blockquote><p>Javaé›†åˆå®¹å™¨ä¸»è¦åŒ…å«äº†ä¸‰ä¸ªæ¥å£ï¼Œåˆ†åˆ«ä¸º<strong>List</strong>ï¼Œ<strong>Set</strong>å’Œ<strong>Map</strong>ï¼Œä»¥åŠå®ç°äº†è¿™äº›æ¥å£çš„è¯¸å¤šå­ç±»ã€‚</p><p>å…¶ä¸­Listå’ŒSetç»§æ‰¿äº†Collectionæ¥å£ï¼Œè€ŒMapæ˜¯å•ç‹¬çš„æ¥å£ã€‚</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210217221746.png" alt="image-20210217221746006"></p><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210217221735.png" alt="image-20210217221733459"></p><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210217221829.png" alt="image-20210217221829486"></p><h3 id="1-2ã€å¯¹æ¯”"><a href="#1-2ã€å¯¹æ¯”" class="headerlink" title="1.2ã€å¯¹æ¯”"></a>1.2ã€å¯¹æ¯”</h3><blockquote><p>Listæ˜¯æœ‰åºçš„ï¼Œæœ‰åºæŒ‡æ’å…¥å…ƒç´ çš„é¡ºåºï¼Œå…¶ä¸­å¯ä»¥å­˜æ”¾é‡å¤å€¼å’Œnullå€¼</p><p>Setæ˜¯æ— åºçš„ï¼Œä¸”å…ƒç´ å…·æœ‰å”¯ä¸€æ€§ï¼Œæ‰€ä»¥åªèƒ½å­˜æ”¾ä¸€ä¸ªnullå€¼</p><p>Mapå­˜æ”¾çš„æ˜¯Entryé”®å€¼å¯¹ï¼Œé”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥åªèƒ½å­˜æ”¾ä¸€ä¸ªkeyä¸ºnullçš„entryï¼Œä½†å¯ä»¥å­˜æ”¾å¤šä¸ªå€¼ä¸ºnullçš„entry</p></blockquote><h3 id="1-3ã€HashMapçš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-3ã€HashMapçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.3ã€HashMapçš„åŸºæœ¬æ¦‚å¿µ"></a>1.3ã€HashMapçš„åŸºæœ¬æ¦‚å¿µ</h3><blockquote><p>HashMapåŸºäºå“ˆå¸Œè¡¨çš„Mapæ¥å£å®ç°ï¼Œæ˜¯ä»¥key-valueå­˜å‚¨å½¢å¼å­˜åœ¨ï¼Œå³ä¸»è¦ç”¨äºå­˜æ”¾é”®å€¼å¯¹ã€‚HashMapçš„å®ç°ä¸æ˜¯åŒæ­¥çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒçš„key-valueéƒ½å¯ä»¥ä¸ºnullï¼ˆåªèƒ½æœ‰ä¸€ä¸ªkeyä¸ºnullï¼Œå¯ä»¥æœ‰å¤šä¸ªå€¼ä¸ºnullï¼‰ï¼Œæ­¤å¤–ï¼ŒHashMapä¸­çš„æ˜ å°„ä¸æ˜¯æœ‰åºçš„ï¼ˆä¸ä¿è¯å­˜å–é¡ºåºï¼‰ã€‚</p><p>JDK1.8ä¹‹å‰HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªï¼ˆä¸¤ä¸ªå¯¹è±¡è°ƒç”¨çš„hashCodeæ–¹æ³•è®¡ç®—çš„å“ˆå¸Œç å€¼ä¸€è‡´å¯¼è‡´è®¡ç®—çš„æ•°ç»„ç³»å¼•å€¼ç›¸åŒï¼‰è€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€œè§£å†³å†²çªï¼‰JDK1.8ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œ<strong>å½“é“¾è¡¨é•¿åº¦å¤§äºé˜€å€¼ï¼ˆæˆ–è€…çº¢é»‘æ ‘çš„è¾¹ç•Œå€¼ï¼Œé»˜è®¤ä¸º8ï¼‰å¹¶ä¸”å½“å‰æ•°ç»„çš„é•¿åº¦å¤§äº64æ—¶</strong>ï¼Œæ­¤æ—¶æ­¤æ¡ˆå¼•ä½ç½®ä¸Šçš„æ‰€æœ‰æ•°æ®æ”¹ä¸ºä½¿ç”¨<strong>çº¢é»‘æ ‘</strong>å­˜å‚¨ã€‚</p><p>è¡¥å……ï¼šå°†é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘å‰ä¼šåˆ¤æ–­ï¼Œå³ä¾¿é˜ˆå€¼å¤§äº8ï¼Œä½†æ˜¯æ•°ç»„é•¿åº¦å°äº64ï¼Œæ­¤æ—¶å¹¶ä¸ä¼šå°†é“¾è¡¨å˜ä¸ºçº¢é»‘æ ‘ã€‚è€Œæ˜¯é€‰æ‹©è¿›è¡Œæ•°ç»„æ‰©å®¹ã€‚</p><p>è¿™æ ·åšçš„ç›®çš„æ˜¯å› ä¸ºæ•ˆç»„æ¯”è¾ƒå°ï¼Œå°½é‡é¿å¼€çº¢é»‘æ ‘ç»“æ„ï¼Œè¿™ç§æƒ…å†µä¸‹å˜ä¸ºçº¢é»‘æ ‘ç»“æ„ï¼Œåè€Œä¼šé™ä½æ•ˆç‡ï¼Œå› ä¸ºçº¢é»‘æ ‘éœ€è¦è¿›è¡Œå·¦æ—‹ï¼Œå³æ—‹ï¼Œå˜è‰²è¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡ã€‚åŒæ—¶æ•°ç»„é•¿åº¦å°äº64æ—¶ï¼Œæœç´¢æ—¶é—´ç›¸å¯¹è¦å¿«äº›ã€‚æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ä¸ºäº†æé«˜æ€§èƒ½å’Œå‡å°‘æœç´¢æ—¶é—´ï¼Œåº•å±‚åœ¨è°ƒå€¼å¤§äº8å¹¶ä¸”æ•°ç»„é•¿åº¦å¤§äº64æ—¶ï¼Œé“¾è¡¨æ‰è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚å´ä½“å¯ä»¥å‚è€ƒtreeifyBinæ–¹æ³•ã€‚</p><p>å½“ç„¶è™½ç„¶å¢äº†çº¢é»‘æ ‘ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œç»“æ„å˜å¾—å¤æ‚äº†ï¼Œä½†æ˜¯é˜ˆå€¼å¤§äº8å¹¶ä¸”æ•°ç»„é•¿åº¦å¤§äº64æ—¶ï¼Œé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘æ—¶ï¼Œæ•ˆç‡ä¹Ÿå˜çš„æ›´é«˜æ•ˆã€‚</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218113025.png" alt="image-20210218113018160"></p><blockquote><p>ç‰¹ç‚¹æ€»ç»“ï¼š</p></blockquote><ul><li>å­˜å–æ˜¯æ— åºçš„</li><li>é”®å’Œå€¼ä½ç½®éƒ½å¯ä»¥æ˜¯nullï¼Œä½†æ˜¯é”®ä½ç½®åªèƒ½æœ‰ä¸€ä¸ªnull</li><li>é”®ä½ç½®æ˜¯å”¯ä¸€çš„</li><li>1.8ä¹‹å‰æ•°æ®ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨ï¼›1.8ä¹‹åæ•°æ®ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</li><li>é˜ˆå€¼ï¼ˆè¾¹ç•Œå€¼ï¼‰ã€‹8ä¸”æ•°ç»„é•¿åº¦å¤§äº64ï¼Œæ‰å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œå˜ä¸ºçº¢é»‘æ ‘çš„ç›®çš„æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„æŸ¥è¯¢ã€‚</li></ul><h3 id="1-4ã€Hashå’ŒHashç®—æ³•"><a href="#1-4ã€Hashå’ŒHashç®—æ³•" class="headerlink" title="1.4ã€Hashå’ŒHashç®—æ³•"></a>1.4ã€Hashå’ŒHashç®—æ³•</h3><blockquote><p>Hashä¹Ÿç§°æ•£åˆ—ã€å“ˆå¸Œï¼ŒåŸºæœ¬åŸç†å°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥ï¼Œé€šè¿‡Hashç®—æ³•å˜ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¿™ä¸ªæ˜ å°„çš„è§„åˆ™å°±æ˜¯å¯¹åº”çš„Hashç®—æ³•ï¼Œè€ŒåŸå§‹æ•°æ®æ˜ å°„åçš„äºŒè¿›åˆ¶ä¸²å°±æ˜¯å“ˆå¸Œå€¼ã€‚</p><p>Hashçš„ç‰¹ç‚¹ï¼š</p></blockquote><ul><li>ä»Hashå€¼ä¸èƒ½åå‘æ¨å¯¼å‡ºåŸå§‹çš„æ•°æ®</li><li>è¾“å…¥æ•°æ®çš„å¾®å°å˜åŒ–ä¼šå¾—åˆ°å®Œå…¨ä¸åŒçš„Hashå€¼ï¼Œç›¸åŒçš„æ•°æ®ä¼šå¾—åˆ°ç›¸åŒçš„å€¼ã€‚</li><li>Hashç®—æ³•çš„æ‰§è¡Œæ•ˆç‡è¦é«˜æ•ˆï¼Œé•¿çš„æ–‡æœ¬ä¹Ÿèƒ½å¿«é€Ÿè®¡ç®—å‡ºHashå€¼</li><li>Hashç®—æ³•çš„å†²çªæ¦‚ç‡è¦å°</li></ul><blockquote><p>ç”±äºHashç®—æ³•çš„åŸç†æ˜¯å°†è¾“å…¥ç©ºé—´çš„å€¼æ˜ å°„æˆHashç©ºé—´å†…ï¼Œè€Œhashå€¼çš„ç©ºé—´è¿œå°äºè¾“å…¥çš„ç©ºé—´ï¼Œæ ¹æ®æŠ½å±‰åŸç†ï¼Œä¸€å®šä¼šå­˜åœ¨ä¸åŒçš„è¾“å…¥è¢«æ˜ å°„ä¸ºç›¸åŒè¾“å‡ºçš„æƒ…å†µã€‚</p><p>æŠ½å±‰åŸç†ï¼š10ä¸ªè‹¹æœæ”¾åˆ°9ä¸ªæŠ½å±‰ä¸­ï¼Œæ— è®ºæ€ä¹ˆæ”¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæŠ½å±‰é‡Œé¢æ”¾ä¸å°‘äºä¸¤ä¸ªè‹¹æœã€‚</p></blockquote><h2 id="2ã€HashMapåŸç†"><a href="#2ã€HashMapåŸç†" class="headerlink" title="2ã€HashMapåŸç†"></a>2ã€HashMapåŸç†</h2><h3 id="2-1ã€HashMapçš„ç»§æ‰¿ä½“ç³»"><a href="#2-1ã€HashMapçš„ç»§æ‰¿ä½“ç³»" class="headerlink" title="2.1ã€HashMapçš„ç»§æ‰¿ä½“ç³»"></a>2.1ã€HashMapçš„ç»§æ‰¿ä½“ç³»</h3><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218123331.png" alt="image-20210218123330894"></p><h3 id="2-3ã€åº•å±‚æ•°æ®ç»“æ„ä»‹ç»"><a href="#2-3ã€åº•å±‚æ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="2.3ã€åº•å±‚æ•°æ®ç»“æ„ä»‹ç»"></a>2.3ã€åº•å±‚æ•°æ®ç»“æ„ä»‹ç»</h3><ul><li>JDK1.7åŠä¹‹å‰</li></ul><blockquote><p>HashMapåº•å±‚ä½¿ç”¨æ•°ç»„ + é“¾è¡¨çš„å½¢å¼æ¥å®ç°HashMapï¼Œå½“åˆ›å»ºHashMapé›†åˆå¯¹è±¡æ—¶ï¼Œæ„é€ æ–¹æ³•ä¸­ä¼š<strong>åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º16çš„Entry[] table</strong>æ¥å­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚</p></blockquote><ul><li>JDK1.8ä¹‹å</li></ul><blockquote><p>HashMapåº•å±‚ä½¿ç”¨æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘æ¥å®ç°HashMapï¼Œåœ¨JDK8ä¹‹åä¸å†ä½¿ç”¨HashMapçš„æ„é€ æ–¹æ³•åº•å±‚åˆ›å»ºæ•°ç»„äº†ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨putå­˜å‚¨æ—¶æ‰åˆ›å»ºæ•°ç»„ï¼Œä½¿ç”¨Node[] tableæ¥å­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚</p></blockquote><h3 id="2-4ã€Hashè¡¨ä½¿ç”¨ä»€ä¹ˆç®—æ³•è®¡ç®—hashå€¼ï¼Ÿ"><a href="#2-4ã€Hashè¡¨ä½¿ç”¨ä»€ä¹ˆç®—æ³•è®¡ç®—hashå€¼ï¼Ÿ" class="headerlink" title="2.4ã€Hashè¡¨ä½¿ç”¨ä»€ä¹ˆç®—æ³•è®¡ç®—hashå€¼ï¼Ÿ"></a>2.4ã€Hashè¡¨ä½¿ç”¨ä»€ä¹ˆç®—æ³•è®¡ç®—hashå€¼ï¼Ÿ</h3><ul><li>åº•å±‚é‡‡ç”¨çš„æ˜¯keyçš„hashCodeæ–¹æ³•çš„å€¼ç»“åˆæ•°ç»„é•¿åº¦è¿›è¡Œæ— ç¬¦å·å³ç§»(&gt;&gt;&gt;),æŒ‰ä½å¼‚æˆ–(^),æŒ‰ä½ä¸(&amp;)è®¡ç®—å‡ºç´¢å¼•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è¿˜å¯ä»¥ä½¿ç”¨å¹³æ–¹å–ä¸­æ³•ã€å–ä½™æ•°ã€ä¼ªéšæœºæ•°æ³•è®¡ç®—hashå€¼</p></li><li><p>ä¸ºä»€ä¹ˆåº•å±‚é‡‡ç”¨çš„æ— ç¬¦å·å³ç§»ã€æŒ‰ä½å¼‚æˆ–ã€æŒ‰ä½ä¸è€Œä¸æ˜¯é‡‡ç”¨å–ä½™å‘¢ï¼Ÿ</p></li></ul><blockquote><p>å…¶ä»–è®¡ç®—æ–¹å¼æ•ˆç‡æ¯”è¾ƒä½ï¼Œè€Œä¸Šè¿°ä½è¿ç®—æ•ˆç‡è¾ƒé«˜ã€‚</p></blockquote><h3 id="2-5ã€putæ•°æ®åŸç†åˆ†æ"><a href="#2-5ã€putæ•°æ®åŸç†åˆ†æ" class="headerlink" title="2.5ã€putæ•°æ®åŸç†åˆ†æ"></a>2.5ã€putæ•°æ®åŸç†åˆ†æ</h3><ul><li>map.put(â€œèŠœæ¹–â€,â€èµ·é£â€);</li><li>è·å–é”®â€èŠœæ¹–â€å­—ç¬¦ä¸²çš„Hashå€¼</li><li>ç»è¿‡hashå€¼æ‰°åŠ¨å‡½æ•°ï¼Œä½¿æ­¤hashå€¼æ›´æ•£åˆ—</li><li>æ„é€ å‡ºNodeå¯¹è±¡</li><li>é€šè¿‡è·¯ç”±ç®—æ³•ï¼Œæ‰¾å‡ºNodeåº”å½“å­˜æ”¾åœ¨æ•°ç»„ä¸­çš„ä½ç½®</li></ul><blockquote><p>è·¯ç”±å¯»å€å…¬å¼ï¼š(table.length - 1) &amp; node.hash</p><p>è¿™é‡Œè¦æ³¨æ„ï¼Œtableæ•°ç»„çš„å¤§å°ä¸º2^n</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218220841.png" alt="2021-02-18_220529"></p><h3 id="2-6ã€ä»€ä¹ˆæ˜¯Hashç¢°æ’"><a href="#2-6ã€ä»€ä¹ˆæ˜¯Hashç¢°æ’" class="headerlink" title="2.6ã€ä»€ä¹ˆæ˜¯Hashç¢°æ’"></a>2.6ã€ä»€ä¹ˆæ˜¯Hashç¢°æ’</h3><blockquote><p>å¦‚æœä¸¤ä¸ªè¾“å…¥ä¸²çš„hashå‡½æ•°çš„å€¼ä¸€æ ·ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªä¸²æ˜¯ä¸€ä¸ªç¢°æ’(Collision)ã€‚æ—¢ç„¶æ˜¯æŠŠä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²å˜æˆå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¿…æœ‰ä¸€ä¸ªè¾“å‡ºä¸²å¯¹åº”æ— ç©·å¤šä¸ªè¾“å…¥ä¸²ï¼Œç¢°æ’æ˜¯å¿…ç„¶å­˜åœ¨çš„ã€‚</p><p>å³å…ƒç´ çš„keyä¸åŒï¼Œä½†å¾—å‡ºçš„hashå€¼ç›¸åŒ</p></blockquote><h3 id="2-7ã€ä»€ä¹ˆå¼•å…¥çº¢é»‘æ ‘ï¼Ÿ"><a href="#2-7ã€ä»€ä¹ˆå¼•å…¥çº¢é»‘æ ‘ï¼Ÿ" class="headerlink" title="2.7ã€ä»€ä¹ˆå¼•å…¥çº¢é»‘æ ‘ï¼Ÿ"></a>2.7ã€ä»€ä¹ˆå¼•å…¥çº¢é»‘æ ‘ï¼Ÿ</h3><blockquote><p>åœ¨jdk8ä¹‹å‰HashMapçš„å®ç°æ˜¯æ•°ç»„ï¼‹é“¾è¡¨ï¼Œå³ä½¿å“ˆå¸Œå‡½æ•°å–å¾—å†å¥½ï¼Œä¹Ÿå¾ˆéš¾è¾¾åˆ°å…ƒç´ ç™¾åˆ†ç™¾å‡åŒ€åˆ†å¸ƒã€‚å½“HashMapä¸­æœ‰å¤§é‡çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨åŒä¸€ä¸ªæ¡¶ä¸­æ—¶ï¼Œè¿™ä¸ªæ¡¶ä¸‹æœ‰ä¸€æ¡é•¿é•¿çš„é“¾è¡¨ï¼Œè¿™ä¸ªæ—¶å€™HashMapå°±ç›¸å½“äºä¸€ä¸ªå•é“¾è¡¨ï¼Œå‡å¦‚å•é“¾è¡¨æœ‰nä¸ªå…ƒç´ ï¼Œéå†çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ï¼Œå®Œå…¨å¤±å»äº†å®ƒçš„ä¼˜åŠ¿ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒJDK1.8ä¸­å¼•å…¥äº†çº¢é»‘æ ‘ï¼ˆæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ï¼‰æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ã€‚å½“é“¾è¡¨é•¿åº¦å¾ˆå°çš„æ—¶å€™ï¼Œå³ä½¿éå†ï¼Œé€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼Œä½†æ˜¯å½“é“¾è¡¨é•¿åº¦ä¸æ–­å˜é•¿ï¼Œè‚¯å®šä¼šå¯¹æŸ¥è¯¢æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ï¼Œæ‰€ä»¥æ‰éœ€è¦è½¬æˆæ ‘ã€‚</p></blockquote><h2 id="3ã€HashMapæºç åˆ†æ"><a href="#3ã€HashMapæºç åˆ†æ" class="headerlink" title="3ã€HashMapæºç åˆ†æ"></a>3ã€HashMapæºç åˆ†æ</h2><h3 id="3-1ã€æ ¸å¿ƒå±æ€§åˆ†æ"><a href="#3-1ã€æ ¸å¿ƒå±æ€§åˆ†æ" class="headerlink" title="3.1ã€æ ¸å¿ƒå±æ€§åˆ†æ"></a>3.1ã€æ ¸å¿ƒå±æ€§åˆ†æ</h3><blockquote><p>DEFAULT_INITIAL_CAPACITY</p></blockquote><ul><li>tableæ•°ç»„çš„é»˜è®¤å¤§å°ï¼Œå½“ä½¿ç”¨æ— å‚å‡½æ•°æ„é€ HashMapæ—¶ï¼ŒHashMapå¯¹è±¡çš„å¤§å°é»˜è®¤ä¸º16</li></ul><blockquote><p>TREEIFY_THRESHOLD</p></blockquote><ul><li>æ ‘åŒ–é˜ˆå€¼ä¹‹ä¸€ï¼Œé»˜è®¤ä¸º8</li></ul><blockquote><p>UNTREEIFY_THRESHOLD</p></blockquote><ul><li>æ ‘é™çº§ä¸ºé“¾è¡¨çš„é˜ˆå€¼ï¼Œé»˜è®¤ä¸º6</li></ul><blockquote><p>MIN_TREEIFY_CAPACITY</p></blockquote><ul><li>æ ‘åŒ–é˜ˆå€¼ä¹‹ä¸€ï¼Œåªæœ‰å½“tableæ•°ç»„ä¸­å…ƒç´ å¤§å°è¶…è¿‡è¿™ä¸ªå€¼æ—¶ï¼Œæ•°ç»„ä¸­é•¿åº¦å¤§äºTREEIFY_THRESHOLDçš„é“¾è¡¨æ‰èƒ½è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</li></ul><blockquote><p>transient Node&lt;K,V&gt;[] table</p></blockquote><ul><li>ashmapä¸­ç»´æŠ¤çš„æ•£åˆ—è¡¨ç»“æ„ï¼Œæ˜¯ä¸€ä¸ªNodeæ•°ç»„</li><li>JDK1.8åï¼ŒHashMapå¯¹è±¡åœ¨è¢«æ„é€ å‡ºæ¥æ—¶ä¸åˆå§‹åŒ–æ•£åˆ—è¡¨ï¼Œè€Œæ˜¯ç­‰åˆ°ç¬¬ä¸€æ¬¡å¾€è¯¥å¯¹è±¡ä¸­puté”®å€¼å¯¹æ—¶æ‰åˆå§‹åŒ–æ•£åˆ—è¡¨ã€‚</li></ul><blockquote><p>transient int size</p></blockquote><ul><li>å½“å‰å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå³HashMapå¯¹è±¡ä¸­é”®å€¼å¯¹ä¸ªæ•°ã€‚</li></ul><blockquote><p>transient int modCount</p></blockquote><ul><li>å½“å‰hashè¡¨ç»“æ„çš„ä¿®æ”¹æ¬¡æ•°,å¾€hashMapä¸­æ”¾å…¥ä¸€ä¸ªé”®å€¼å¯¹ï¼Œåˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼ŒmodCount+1ï¼Œä½†ä½¿ç”¨ç›¸åŒkeyï¼Œä¸åŒvalueçš„Nodeè¦†ç›–æ—§å€¼æ—¶ï¼ŒmodCountä¸ä¼š+1</li></ul><blockquote><p>threshold</p></blockquote><ul><li>æ‰©å®¹é˜ˆå€¼ï¼Œå½“Hashè¡¨ä¸­çš„å…ƒç´ è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘æ‰©å®¹</li><li>threshold = capacity * loadFactoryï¼Œå…¶ä¸­capacityè¡¨ç¤ºå½“å‰hashè¡¨çš„æ•°ç»„é•¿åº¦</li></ul><blockquote><p>loadFactory</p></blockquote><ul><li>è´Ÿè½½å› å­ï¼Œé»˜è®¤è´Ÿè½½å› å­å¤§å°ä¸º0.75</li></ul><h3 id="3-2ã€æ„é€ æ–¹æ³•åˆ†æ"><a href="#3-2ã€æ„é€ æ–¹æ³•åˆ†æ" class="headerlink" title="3.2ã€æ„é€ æ–¹æ³•åˆ†æ"></a>3.2ã€æ„é€ æ–¹æ³•åˆ†æ</h3><ul><li>æ„é€ æ–¹æ³•ä¸€ï¼Œè‡ªå®šä¹‰åˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal initial capacity: &quot;</span> +</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal load factor: &quot;</span> +</span><br><span class="line">                                           loadFactor);</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>tableSizeFor(initialCapacity)æ–¹æ³•ï¼Œ<strong>å°±æ˜¯è¿”å›ä¸€ä¸ªå¤§äºç­‰äºå½“å‰capacityçš„ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯2çš„æ¬¡æ–¹æ•°ã€‚</strong></p><p>å‡è®¾ä¼ å…¥çš„capä¸º10</p><p>é‚£ä¹ˆn = cap - 1 = 9</p><p>å°†nè½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œnå˜ä¸º1001</p><p>n &gt;&gt;&gt; 1 = 0100ï¼Œå³ç§»å°±æ˜¯åœ¨1001çš„æœ€å‰é¢è¡¥ä¸Šä¸€ä¸ª0ï¼Œä½¿å…¶å˜ä¸º01001ï¼Œç„¶åæˆªå»æœ€åä¸€ä½ï¼Œå˜ä¸º0100ï¼Œè€Œ1001 | 0100 = 1101ï¼Œæ­¤æ—¶n = 1101</p><p>åŒç†å¯å¾—1101 &gt;&gt;&gt; 2 = 0011ï¼Œ1101 | 0011 = 1111</p><p>åŒç†å¯å¾—1111 &gt;&gt;&gt;&gt; 4 = 0000ï¼Œ1111 | 0000 = 1111</p><p>æ­¤æ—¶n&gt;&gt;&gt;8ã€n&gt;&gt;&gt;16çš„ç»“æœå’Œä¸Šé¢ä¸€è‡´ï¼Œæ•…n = 1111(2) = 15(10)</p><p>æœ€åæ‰§è¡Œreturnè¯­å¥ï¼Œæ­¤æ—¶è¿”å›15 + 1 = 16ï¼Œä¸º2^ 4</p><p>å¦‚æœä¸å‡ä¸€ï¼Œé‚£ä¹ˆä¼šå¾—åˆ°ä¸€ä¸ªæ¯”é¢„æœŸç»“æœå¤§ä¸€å€çš„æ•°å­—</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">tableSizeFor</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ„é€ æ–¹æ³•äºŒï¼šè‡ªå®šä¹‰åˆå§‹åŒ–å¤§å°ï¼Œè°ƒç”¨äº†ä¸Šé¢çš„æ„é€ æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ„é€ æ–¹æ³•ä¸‰ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ„é€ æ–¹æ³•å››ï¼šæ ¹æ®ä¼ å…¥çš„Mapæ„é€ HashMap</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">    putMapEntries(m, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3ã€putæ–¹æ³•åˆ†æ"><a href="#3-3ã€putæ–¹æ³•åˆ†æ" class="headerlink" title="3.3ã€putæ–¹æ³•åˆ†æ"></a>3.3ã€putæ–¹æ³•åˆ†æ</h3><blockquote><p>åˆ†ææºç å¯çŸ¥ï¼Œputæ–¹æ³•å†…éƒ¨è°ƒç”¨äº†putValæ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>hash(key)æ–¹æ³•ï¼Œæ‰°åŠ¨å‡½æ•°ï¼Œä½œç”¨æ˜¯è®©keyçš„hashå€¼çš„é«˜16ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œå¢åŠ æ•£åˆ—æ€§ï¼Œå‡å°‘hashå†²çªçš„æ¦‚ç‡ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ ¸å¿ƒputValæ–¹æ³•</p><p>æ³¨æ„ï¼šè¿™é‡ŒHashMapå®ç°äº†å»¶è¿Ÿåˆå§‹åŒ–ï¼Œå³new HashMapçš„æ—¶å€™ä¸åˆ›å»ºæ•£åˆ—è¡¨ï¼Œç­‰åˆ°ç¬¬ä¸€æ¬¡å¾€hashMapä¸­puté”®å€¼å¯¹æ—¶æ‰åˆå§‹åŒ–ï¼ŒèŠ‚çœäº†å†…å­˜ç©ºé—´ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">                 <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">      <span class="comment">//tabï¼šå¼•ç”¨å½“å‰hashMapçš„æ•£åˆ—è¡¨</span></span><br><span class="line"><span class="comment">//pï¼šè¡¨ç¤ºå½“å‰æ•£åˆ—è¡¨çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//nï¼šè¡¨ç¤ºæ•£åˆ—è¡¨æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">//iï¼šè¡¨ç¤ºè·¯ç”±å¯»å€ç»“æœçš„ä¸‹æ ‡</span></span><br><span class="line">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">      <span class="comment">//å¦‚æœå½“å‰hashmapä¸­çš„æ•£åˆ—è¡¨ä¸ºnullï¼Œæˆ–è€…æ•£åˆ—è¡¨é•¿åº¦ä¸º0</span></span><br><span class="line">      <span class="comment">//n = (tab = resize()).length;åˆ›å»ºæ•£åˆ—è¡¨</span></span><br><span class="line">      <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">          n = (tab = resize()).length;</span><br><span class="line">      <span class="comment">//i = (n - 1) &amp; hashï¼Œä½¿ç”¨è·¯ç”±å¯»å€ç®—æ³•è®¡ç®—å‡ºè¦å½“å‰é”®å€¼å¯¹è¦å­˜æ”¾çš„ä½ç½®</span></span><br><span class="line">      <span class="comment">//å¦‚æœæ•£åˆ—è¡¨ä¸­è¯¥ä¸‹æ ‡å¯¹åº”å…ƒç´ ä¸ºnullï¼Œé‚£ä¹ˆå°±new ä¸€ä¸ªNodeèŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">          tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//eï¼šnodeä¸´æ—¶å…ƒç´ </span></span><br><span class="line">	<span class="comment">//kï¼šè¡¨ç¤ºä¸´æ—¶çš„ä¸€ä¸ªkey</span></span><br><span class="line">          Node&lt;K,V&gt; e; K k;</span><br><span class="line">          <span class="comment">//è¡¨ç¤ºæ¡¶ä½ä¸­çš„è¯¥å…ƒç´ ï¼Œä¸ä½ å½“å‰æ’å…¥çš„å…ƒç´ çš„keyå®Œå…¨ä¸€è‡´ï¼Œè¡¨ç¤ºåç»­éœ€è¦è¿›è¡Œæ›¿æ¢æ“ä½œã€‚</span></span><br><span class="line">          <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">              ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">              e = p;</span><br><span class="line">          <span class="comment">//å¦‚æœè¦æ’å…¥çš„æ¡¶ä½å¯¹åº”çš„å…ƒç´ å·²ç»æ ‘åŒ–ï¼Œå³è¦æ’å…¥çš„ä½ç½®ä¸æ˜¯ä¸€æ ¹é“¾è¡¨è€Œæ˜¯ä¸€æ£µçº¢é»‘æ ‘</span></span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">              e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">          <span class="comment">//å¦‚æœä¸æ˜¯æ ‘ä¹Ÿä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåªèƒ½æ˜¯é“¾è¡¨äº†</span></span><br><span class="line">          <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">//å¾ªç¯éå†æ‰¾åˆ°çš„é“¾è¡¨ï¼Œå¦‚æœé“¾è¡¨ä¸­æœ‰keyä¸å¾…æ’å…¥é”®å€¼å¯¹ç›¸åŒçš„å…ƒç´ ï¼Œé‚£ä¹ˆç”¨æ–°çš„å€¼æ›¿æ¢æ—§çš„å€¼</span></span><br><span class="line">              <span class="comment">//å¦åˆ™å°†å¾…æ’å…¥å…ƒç´ åŠ å…¥åˆ°è¯¥é“¾è¡¨ä¸­</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                  <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                      p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                      <span class="comment">//è¡¨ç¤ºå½“å‰é“¾è¡¨ä¸­çš„å…ƒç´ å¤§äºä¸´ç•Œå€¼ï¼Œæ­¤æ—¶å¯èƒ½éœ€è¦æ ‘åŒ–</span></span><br><span class="line">                      <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                          treeifyBin(tab, hash);</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//æ‰¾åˆ°äº†å«æœ‰ç›¸åŒkeyçš„å…ƒç´ ï¼Œéœ€è¦è¿›è¡Œæ›¿æ¢æ“ä½œ</span></span><br><span class="line">                  <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                      ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  p = e;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//å¦‚æœeä¸ä¸ºnullï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªä¸ä½ æ’å…¥å…ƒç´ keyå®Œå…¨ä¸€è‡´çš„å…ƒç´ ï¼Œéœ€è¦æ›¿æ¢</span></span><br><span class="line">          <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">              V oldValue = e.value;</span><br><span class="line">              <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                  e.value = value;</span><br><span class="line">              afterNodeAccess(e);</span><br><span class="line">              <span class="keyword">return</span> oldValue;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//è®©æ•£åˆ—è¡¨è¢«ä¿®æ”¹çš„æ¬¡æ•°+1</span></span><br><span class="line">      ++modCount;</span><br><span class="line">      <span class="comment">//å¦‚æœsizeè‡ªå¢åå€¼å¤§äºæ‰©å®¹é˜ˆå€¼ï¼Œåˆ™è§¦å‘æ‰©å®¹ã€‚</span></span><br><span class="line">      <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">          resize();</span><br><span class="line">      afterNodeInsertion(evict);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“å¦‚ä¸‹ï¼š</p></blockquote><ul><li>å…ˆé€šè¿‡hashå€¼è®¡ç®—å‡ºkeyæ˜ å°„åˆ°å“ªä¸ªæ¡¶</li><li>å¦‚æœæ¡¶ä¸Šæ²¡æœ‰Hashå†²çªï¼Œåˆ™ç›´æ¥æ’å…¥</li><li>å¦‚æœå‡ºç°hashå†²çªï¼Œåˆ™éœ€è¦å¤„ç†å†²çª<ul><li>å¦‚æœè¯¥æ¡¶é‡‡ç”¨çº¢é»‘æ ‘å¤„ç†å†²çªï¼Œåˆ™è°ƒç”¨çº¢é»‘æ ‘çš„æ–¹æ³•æ’å…¥æ•°æ®ã€‚</li><li>å¦åˆ™é‡‡ç”¨ä¼ ç»Ÿçš„é“¾å¼æ–¹æ³•æ’å…¥ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦è¾¾åˆ°ä¸´ç•Œå€¼ä¸”æ¡¶ä¸ªæ•°è¾¾åˆ°64ä¸ªï¼Œåˆ™æŠŠé“¾å˜ä¸ºçº¢é»‘æ ‘ã€‚</li></ul></li><li>å¦‚æœæ¡¶ä¸­å­˜åœ¨é‡å¤çš„å€¼ï¼Œåˆ™ä¸ºè¯¥é”®æ›¿æ¢æ–°å€¼value</li><li>å¦‚æœsizeå¤§äºé˜ˆå€¼thresholdï¼Œåˆ™è¿›è¡Œæ‰©å®¹</li></ul><blockquote><p>å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>hash(key)ï¼Œè·å–keyçš„hashå€¼</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> h;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		1)å¦‚æœkeyç­‰äºnull;</span></span><br><span class="line"><span class="comment">			å¯ä»¥çœ‹åˆ°å½“keyç­‰äºnullçš„æ—¶å€™ä¹Ÿæ˜¯æœ‰å“ˆå¸Œå€¼çš„ï¼Œè¿”å›çš„æ˜¯0.</span></span><br><span class="line"><span class="comment">		2)å¦‚æœkeyä¸ç­‰äºnull;</span></span><br><span class="line"><span class="comment">			é¦–å…ˆè®¡ç®—å‡ºkeyçš„hashCodeèµ‹å€¼ç»™h,ç„¶åä¸hæ— ç¬¦å·å³ç§»16ä½åçš„äºŒè¿›åˆ¶è¿›è¡ŒæŒ‰ä½å¼‚æˆ–å¾—åˆ°æœ€åçš„hashå€¼		</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨putValå‡½æ•°ä¸­ä½¿ç”¨äº†ä¸Šè¿°hashå‡½æ•°è®¡ç®—å‡ºçš„hashå€¼ï¼Œæ ¹æ®å…¬å¼(n - 1) &amp; hashæ¥å†³å®šè¦æ”¾å…¥å“ªä¸ªæ¡¶ä¸­ï¼Œå…¶ä¸­nä¸ºHashMapå¯¹è±¡ä¸­çš„æ¡¶ä¸ªæ•°ï¼ˆæ•°ç»„é•¿åº¦ï¼‰ã€‚</p><ul><li>&amp;ï¼ˆæŒ‰ä½ä¸è¿ç®—ï¼‰ï¼šè¿ç®—è§„åˆ™ï¼šç›¸åŒäºŒè¿›åˆ¶ä½ä¸Šï¼Œéƒ½æ˜¯1çš„æ—¶å€™ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</li><li>^ï¼ˆæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼‰ï¼šè¿ç®—è§„åˆ™ï¼šç›¸åŒçš„äºŒè¿›åˆ¶æ•°ä½ä¸Šï¼Œæ•°å­—ç›¸åŒï¼Œç»“æœä¸º0ï¼Œä¸åŒåˆ™ä¸º1ã€‚</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent, <span class="keyword">boolean</span> evict)</span></span>&#123;</span><br><span class="line">	......</span><br><span class="line">	<span class="keyword">if</span>((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)<span class="comment">//è¿™é‡Œçš„nè¡¨ç¤ºæ•°ç»„çš„é•¿åº¦16</span></span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4ã€resizeæ‰©å®¹æ–¹æ³•åˆ†æ"><a href="#3-4ã€resizeæ‰©å®¹æ–¹æ³•åˆ†æ" class="headerlink" title="3.4ã€resizeæ‰©å®¹æ–¹æ³•åˆ†æ"></a>3.4ã€resizeæ‰©å®¹æ–¹æ³•åˆ†æ</h3><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦æ‰©å®¹ï¼Ÿ</p><p>ä¸ºäº†è§£å†³å› å“ˆå¸Œå†²çªè€Œå¯¼è‡´çš„é“¾åŒ–å½±å“æŸ¥è¯¢æ•ˆç‡çš„é—®é¢˜ï¼Œæ‰©å®¹å¯ä»¥ç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    <span class="comment">//odTabå¼•ç”¨æœªæ‰©å®¹çš„å“ˆå¸Œè¡¨</span></span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="comment">//oldCapï¼šè¡¨ç¤ºæ‰©å®¹å‰çš„tableæ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="comment">//å¦‚æœæ‰©å®¹å‰çš„tableä¸ºç©ºï¼Œåˆ™oldCap = 0</span></span><br><span class="line">    <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="comment">//è¡¨ç¤ºæ‰©å®¹å‰çš„æ‰©å®¹é˜ˆå€¼ï¼Œè§¦å‘æœ¬è¯æ‰©å®¹çš„é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">    <span class="comment">//newCapï¼šæ‰©å®¹ä¹‹åæƒ³è¦è¾¾åˆ°çš„å¤§å°</span></span><br><span class="line">    <span class="comment">//newThrï¼šæ‰©å®¹åå†æ¬¡è§¦å‘æ‰©å®¹çš„æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœoldCap&gt;0ï¼Œé‚£ä¹ˆè¯æ˜å“ˆå¸Œè¡¨ä¸­çš„æ•£åˆ—è¡¨å·²ç»è¢«åˆå§‹åŒ–è¿‡äº†</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæ‰©å®¹å‰æ•°ç»„é•¿åº¦å·²ç»è¾¾åˆ°HashMapå®šä¹‰çš„æœ€å¤§å€¼ï¼Œæ­¤æ—¶æ— æ³•æ‰©å®¹</span></span><br><span class="line">        <span class="comment">//å°†æ‰©å®¹é˜ˆå€¼èµ‹å€¼ä¸ºIntegerç±»å‹çš„æœ€å¤§å€¼åè¿”å›æ—§çš„æ•£åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä»¤newCap = 2 * oldCapï¼Œå¦‚æœæ‰©å®¹åçš„newCapå°äºHashMapè§„å®šçš„æœ€å°å€¼ä¸”åŸæ¥çš„oldCapå¤§äºç­‰äºé»˜è®¤åˆå§‹åŒ–å¤§å°ï¼Œè®©æ–°çš„æ‰©å®¹é˜ˆå€¼ = 2 * åŸæ¥çš„æ‰©å®¹é˜ˆå€¼</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿™é‡Œå’Œä¸‹é¢ä¸¤ç§æƒ…å†µå‡è¯´æ˜oldCap == 0</span></span><br><span class="line">    <span class="comment">//ä¼šæ‰§è¡Œè¿™ä¸€æ­¥çš„æƒ…å†µå¦‚ä¸‹ï¼š</span></span><br><span class="line">    <span class="comment">//1 new HashMap(initCap,loadFactory)</span></span><br><span class="line">    <span class="comment">//2 new HashMap(initCap)</span></span><br><span class="line">    <span class="comment">//3 new HashMap(map)ï¼Œå¹¶ä¸”è¿™ä¸ªmapæœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="comment">//oldCap == 0</span></span><br><span class="line">    <span class="comment">//æ‰§è¡Œè¿™ä¸€æ­¥çš„æƒ…å†µå¦‚ä¸‹</span></span><br><span class="line">    <span class="comment">//new HashMap()</span></span><br><span class="line">    <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;<span class="comment">//16</span></span><br><span class="line">        <span class="comment">//12</span></span><br><span class="line">        newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//newThrä¸º0æ—¶ï¼Œé€šè¿‡è´Ÿè½½å› å­å’Œæ‰©å®¹åçš„å®¹é‡è®¡ç®—å¾—åˆ°ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†æ‰©å®¹é˜ˆå€¼è®¾ç½®ä¸ºnewThr</span></span><br><span class="line">    threshold = newThr;</span><br><span class="line">    <span class="comment">//æ ¹æ®newCapåˆ›å»ºä¸€ä¸ªæ–°çš„Nodeæ•°ç»„</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="comment">//æ­¤æ¡ä»¶è¯´æ˜Hashmapåœ¨æœ¬æ¬¡æ‰©å®¹ä¹‹å‰ä¸ä¸ºnullï¼Œé‡Œé¢å¯èƒ½æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="comment">//è¯´æ˜å½“å‰æ¡¶ä½æœ‰æ•°æ®ï¼Œä½†å…·ä½“æ˜¯å•ä¸ªæ•°æ®ã€é“¾è¡¨è¿˜æ˜¯æ ‘å°šæœªå¾—çŸ¥</span></span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">//æ–¹ä¾¿jvmå›æ”¶å†…å­˜</span></span><br><span class="line">                oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                <span class="comment">//è¡¨ç¤ºè¯¥æ¡¶ä½ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä»æœªå‘ç”Ÿè¿‡Hashç¢°æ’</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)</span><br><span class="line">                    <span class="comment">//ç›´æ¥è®¡ç®—å‡ºå½“å‰å…ƒç´ åº”è¯¥å­˜æ”¾åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ï¼Œç„¶åæ”¾è¿›å»</span></span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="comment">//å½“å‰çš„æ¡¶ä½å­˜æ”¾äº†ä¸€ä¸ªæ ‘</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="comment">//æ¡¶ä½å·²ç»å½¢æˆé“¾è¡¨</span></span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                    <span class="comment">//ä½ä½é“¾è¡¨ï¼šå­˜æ”¾åœ¨æ‰©å®¹ä¹‹åçš„æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ï¼Œä¸å½“å‰æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ä¸€è‡´</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="comment">//é«˜ä½é“¾è¡¨ï¼šå­˜æ”¾å†æ‰©å®¹ä¹‹åçš„æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ä¸ºå½“å‰æ•°ç»„ä¸‹æ ‡ä½ç½®+æ‰©å®¹ä¹‹å‰æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="comment">//å¦‚æœç­‰äº0ï¼Œé‚£ä¹ˆè¯æ˜æ”¾åœ¨ä½ä½æ¡¶</span></span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//ä¸ä¸º0åˆ™æ”¾åœ¨é«˜ä½æ¡¶</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>HashMapçš„æ‰©å®¹æ˜¯ä»€ä¹ˆ?</p></blockquote><ul><li><p><strong>è¿›è¡Œæ‰©å®¹ï¼Œä¼šä¼´éšç€ä¸€æ¬¡é‡æ–°hashåˆ†é…ï¼Œå¹¶ä¸”ä¼šéå†hashè¡¨ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œæ˜¯éå¸¸è€—æ—¶çš„ã€‚åœ¨ç¼–å†™ç¨‹åºä¸­ï¼Œè¦å°½å¯èƒ½é¿å…resizeã€‚</strong></p></li><li><p><strong>HashMapåœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œä½¿ç”¨çš„rehashæ–¹å¼éå¸¸å·§å¦™ï¼Œå› ä¸ºæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯ç¿»å€ï¼Œä¸åŸæ¥è®¡ç®—çš„ï¼ˆn-1ï¼‰&amp;hashçš„ç»“æœç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªbitä½ï¼Œæ‰€ä»¥èŠ‚ç‚¹è¦ä¹ˆå°±åœ¨åŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°â€åŸä½ç½®+æ—§å®¹é‡â€è¿™ä¸ªä½ç½®ã€‚</strong></p></li><li><p><strong>æ€ä¹ˆç†è§£å‘¢ï¼Ÿä¾‹å¦‚æˆ‘ä»¬ä»16æ‰©å±•ä¸º32æ—¶ï¼Œå…·ä½“çš„å˜åŒ–å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p></li></ul><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218232608.png" alt="image-20210218232607701"></p><blockquote><p><strong>æ‰©å®¹ä¹‹åçš„ç´¢å¼•ä½è¦ä¹ˆæ˜¯åŸæ¥ç´¢å¼•ï¼Œè¦ä¹ˆæ˜¯åŸæ¥ç´¢å¼•+æ—§æ•°ç»„å®¹é‡<br>å› æ­¤å…ƒç´ åœ¨é‡æ–°è®¡ç®—hashä¹‹åï¼Œå› ä¸ºnå˜ä¸º2å€ï¼Œé‚£ä¹ˆn-1çš„æ ‡è®°èŒƒå›´åœ¨é«˜ä½å¤š1bitï¼ˆçº¢è‰²ï¼‰ï¼Œå› æ­¤æ–°çš„indexå°±ä¼šå‘ç”Ÿè¿™æ ·çš„å˜åŒ–ï¼š</strong></p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218232714.png" alt="image-20210218232713970"></p><blockquote><p>*è¯´æ˜ï¼š5æ˜¯å‡è®¾è®¡ç®—å‡ºæ¥çš„åŸæ¥çš„ç´¢å¼•ã€‚è¿™æ ·å°±éªŒè¯äº†ä¸Šè¿°æè¿°çš„ï¼šæ‰©å®¹ä¹‹åæ‰€ä»¥èŠ‚ç‚¹è¦ä¹ˆæ”¾åœ¨åŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆè¢«åˆ†é…åˆ°<strong>â€œåŸä½ç½®+æ—§å®¹é‡â€**è¿™ä¸ªä½ç½®ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰©å®¹HashMapçš„æ—¶å€™ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—hashï¼Œåªéœ€è¦çœ‹çœ‹åŸæ¥çš„hashå€¼æ–°å¢çš„é‚£ä¸ªbitæ˜¯1è¿˜æ˜¯0å°±å¯ä»¥äº†ï¼Œæ˜¯0çš„è¯ç´¢å¼•å°±ä¸å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆ</strong>â€œåŸç´¢å¼•+oldCap(åŸä½ç½®+æ—§å®¹é‡)â€**ã€‚å¯ä»¥çœ‹çœ‹ä¸‹å›¾ä¸º16æ‰©å®¹ä¸º32çš„resizeç¤ºæ„å›¾ï¼š</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218232749.png" alt="image-20210218232749785"></p><blockquote><p>æ­£æ˜¯å› ä¸ºè¿™æ ·å·§å¦™çš„rehashæ–¹å¼ï¼Œæ—¢çœå»äº†é‡æ–°è®¡ç®—hashå€¼çš„æ—¶é—´ï¼Œè€Œä¸”åŒæ—¶ï¼Œç”±äºæ–°å¢çš„1bitæ˜¯0è¿˜æ˜¯1å¯ä»¥è®¤ä¸ºæ˜¯éšæœºçš„ï¼Œåœ¨resizeçš„è¿‡ç¨‹ä¸­ä¿è¯äº†rehashä¹‹åæ¯ä¸ªæ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°ä¸€å®šå°äºç­‰äºåŸæ¥æ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°ï¼Œä¿è¯äº†rehashä¹‹åä¸ä¼šå‡ºç°æ›´ä¸¥é‡çš„hashå†²çªï¼Œå‡åŒ€çš„æŠŠä¹‹å‰hashå†²çªçš„èŠ‚ç‚¹åˆ†æ•£åˆ°æ–°çš„æ¡¶ä¸­äº†ã€‚</p></blockquote><h3 id="3-5ã€getæ–¹æ³•åˆ†æ"><a href="#3-5ã€getæ–¹æ³•åˆ†æ" class="headerlink" title="3.5ã€getæ–¹æ³•åˆ†æ"></a>3.5ã€getæ–¹æ³•åˆ†æ</h3><blockquote><p>å®ç°æ€è·¯</p></blockquote><ul><li>è®¡ç®—ä¼ å…¥keyçš„hashå€¼</li><li>é€šè¿‡hashå€¼è·å–è¯¥keyæ˜ å°„åˆ°çš„æ¡¶</li><li>æ¡¶ä¸Šçš„keyæ­£å¥½æ˜¯è¦åˆ é™¤çš„keyï¼Œåˆ™ç›´æ¥æ‰¾åˆ°å¹¶è¿”å›</li><li>æ¡¶å•†çš„keyä¸æ˜¯è¦æ‰¾çš„keyï¼Œåˆ™æŸ¥çœ‹åç»­èŠ‚ç‚¹<ul><li>å¦‚æœåç»­èŠ‚ç‚¹æ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹ï¼Œåˆ™é€šè¿‡è°ƒç”¨çº¢é»‘æ ‘æ–¹æ³•æ ¹æ®keyè·å–value</li><li>å¦‚æœåç»­èŠ‚ç‚¹æ˜¯é“¾è¡¨èŠ‚ç‚¹ï¼Œåˆ™é€šè¿‡å¾ªç¯éå†é“¾è¡¨æ ¹æ®keyè·å–value</li></ul></li></ul><blockquote><p>getæ–¹æ³•ä¸­è°ƒç”¨äº†getNodeæ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>getNodeæ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//tabï¼šå¼•ç”¨å½“å‰HashMapçš„æ•£åˆ—è¡¨</span></span><br><span class="line">    <span class="comment">//firstï¼šæ¡¶ä½ä¸­çš„å¤´å…ƒç´ </span></span><br><span class="line">    <span class="comment">//eï¼šä¸´æ—¶Nodeå…ƒç´ </span></span><br><span class="line">    <span class="comment">//nï¼štableæ•°ç»„é•¿åº¦</span></span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">    <span class="comment">//æ•£åˆ—è¡¨ä¸ä¸ºç©ºä¸”tableæ•°ç»„ä¸­hashå¯¹åº”çš„æ¡¶ä¸ä¸ºç©ºæ—¶æ‰è¿›è¡Œå–å…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//è¯´æ˜è·¯ç”±å¯»å€å‡ºæ¥çš„æ¡¶çš„å¤´å…ƒç´ å°±æ˜¯è¦å¯»æ‰¾çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">            ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="comment">//å¯»æ‰¾å‡ºæ¥çš„æ¡¶ä½ä¸æ˜¯å•ä¸ªå…ƒç´ ï¼Œä¸”å¤´å…ƒç´ ä¸æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ï¼Œæ­¤æ—¶æ¡¶ä½å…ƒç´ å¯èƒ½æ˜¯ä¸€æ¡é“¾è¡¨æˆ–ä¸€æ£µçº¢é»‘æ ‘</span></span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//æ¡¶ä½å…ƒç´ å‡çº§æˆäº†çº¢é»‘æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="comment">//æ¡¶ä½å…ƒç´ æ˜¯ä¸€æ¡é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="comment">//éå†æ•´ä¸ªé“¾è¡¨ï¼Œæ‰¾åˆ°å°±è¿”å›ï¼Œå¦åˆ™è·³å‡ºå¾ªç¯è¿”å›null</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-6ã€removeæ–¹æ³•åˆ†æ"><a href="#3-6ã€removeæ–¹æ³•åˆ†æ" class="headerlink" title="3.6ã€removeæ–¹æ³•åˆ†æ"></a>3.6ã€removeæ–¹æ³•åˆ†æ</h3><blockquote><p>removeæ–¹æ³•åº•å±‚è°ƒç”¨äº†removeNodeæ–¹æ³•</p><p>æ€è·¯</p></blockquote><ul><li>æ ¹æ®ä¼ å…¥çš„keyè®¡ç®—å‡ºkeyçš„hashå€¼</li><li>å†æ ¹æ®è·¯ç”±å¯»å€å…¬å¼(n - 1) &amp; hashæ‰¾åˆ°æ¡¶çš„ä½ç½®<ul><li>å¦‚æœæ‰¾åˆ°çš„æ¡¶æ˜¯é“¾è¡¨ï¼Œåˆ™éå†é“¾è¡¨ä½¿ç”¨equalsæ–¹æ³•æ‰¾åˆ°å…ƒç´ ååˆ é™¤ï¼Œ</li><li>å¦‚æœæ˜¯çº¢é»‘æ ‘å°±éœ€è¦éå†æ ‘ç„¶ååˆ é™¤å…ƒç´ ï¼Œæ¡¶å…ƒç´ å°äº6åè½¬ä¸ºé“¾è¡¨ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">return</span> (e = removeNode(hash(key), key, <span class="keyword">null</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)) == <span class="keyword">null</span> ?</span><br><span class="line">        <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>removeNodeæ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">removeNode</span><span class="params">(<span class="keyword">int</span> hash, Object key, Object value,</span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="keyword">boolean</span> matchValue, <span class="keyword">boolean</span> movable)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//tabï¼šå¼•ç”¨å½“å‰hashMapçš„æ•£åˆ—è¡¨</span></span><br><span class="line">       <span class="comment">//pï¼šå½“å‰nodeå…ƒç´ </span></span><br><span class="line">       <span class="comment">//nï¼šè¡¨ç¤ºæ•£åˆ—è¡¨æ•°ç»„é•¿åº¦</span></span><br><span class="line">       <span class="comment">//indexï¼šè¡¨ç¤ºå¯»å€ç»“æœ</span></span><br><span class="line">       Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, index;</span><br><span class="line">       <span class="comment">//åªæœ‰å½“æ•£åˆ—è¡¨ä¸ä¸ºç©ºä¸”tableæ•°ç»„ä¸­å¯»å€ç»“æœå¯¹åº”çš„æ¡¶ä¸ä¸ºç©ºæ—¶ï¼Œæ‰ç»§ç»­åˆ é™¤</span></span><br><span class="line">       <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">           (p = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">           Node&lt;K,V&gt; node = <span class="keyword">null</span>, e; K k; V v;</span><br><span class="line">           <span class="comment">//å¦‚æœå¯»å€ç»“æœå¯¹åº”çš„æ¡¶å…ƒç´ å°±æ˜¯è¦åˆ é™¤çš„Nodeï¼Œæ­¤æ—¶å°†pèµ‹å€¼ç»™node</span></span><br><span class="line">           <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">               ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">               node = p;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> ((e = p.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="comment">//è¡¨ç¤ºæ¡¶ä½ä¸­çš„å…ƒç´ æ˜¯ä¸€æ£µçº¢é»‘æ ‘</span></span><br><span class="line">               <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                   node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">               <span class="comment">//è¡¨ç¤ºæ¡¶ä½ä¸­çš„å…ƒç´ æ˜¯ä¸€æ¡é“¾è¡¨</span></span><br><span class="line">               <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="keyword">do</span> &#123;</span><br><span class="line">                       <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                           ((k = e.key) == key ||</span><br><span class="line">                            (key != <span class="keyword">null</span> &amp;&amp; key.equals(k)))) &#123;</span><br><span class="line">                           node = e;</span><br><span class="line">                           <span class="keyword">break</span>;</span><br><span class="line">                       &#125;</span><br><span class="line">                       p = e;</span><br><span class="line">                   &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//ä¸Šé¢çš„ä»£ç æ˜¯ä¸ºäº†æ‰¾åˆ°è¦åˆ é™¤çš„å…ƒç´ ï¼Œç„¶åå°†å…¶èµ‹ç»™nodeå¼•ç”¨</span></span><br><span class="line">           <span class="comment">//å½“nodeä¸ä¸ºç©ºæ—¶è¿›è¡Œåˆ é™¤</span></span><br><span class="line">           <span class="keyword">if</span> (node != <span class="keyword">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                                (value != <span class="keyword">null</span> &amp;&amp; value.equals(v)))) &#123;</span><br><span class="line">               <span class="comment">//æ ¹æ®nodeçš„ç±»å‹åˆ é™¤</span></span><br><span class="line">               <span class="comment">//nodeæ˜¯ä¸€ä¸ªæ ‘èŠ‚ç‚¹</span></span><br><span class="line">               <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                   ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class="keyword">this</span>, tab, movable);</span><br><span class="line">               <span class="comment">//è®©table[å¯»å€ç»“æœ]æŒ‡å‘nodeçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¯èƒ½ä¸ºç©ºï¼Œå¯èƒ½ä¸ºä¸€ä¸ªNode</span></span><br><span class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (node == p)</span><br><span class="line">                   tab[index] = node.next;</span><br><span class="line">               <span class="keyword">else</span></span><br><span class="line">                   <span class="comment">//å¦‚æœnodeåœ¨ä¸€æ¡é“¾è¡¨ä¸­ï¼Œå°±æŒ‰ç…§é“¾è¡¨çš„åˆ é™¤æ–¹å¼åˆ é™¤æ­¤node</span></span><br><span class="line">                   p.next = node.next;</span><br><span class="line">               <span class="comment">//modCount++</span></span><br><span class="line">               ++modCount;</span><br><span class="line">               <span class="comment">//æ•£åˆ—è¡¨ä¸­å…ƒç´ ä¸ªæ•°-1</span></span><br><span class="line">               --size;</span><br><span class="line">               </span><br><span class="line">               afterNodeRemoval(node);</span><br><span class="line">               <span class="keyword">return</span> node;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="3-7ã€replaceæ–¹æ³•åˆ†æ"><a href="#3-7ã€replaceæ–¹æ³•åˆ†æ" class="headerlink" title="3.7ã€replaceæ–¹æ³•åˆ†æ"></a>3.7ã€replaceæ–¹æ³•åˆ†æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">replace</span><span class="params">(K key, V oldValue, V newValue)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e; V v;</span><br><span class="line">    <span class="keyword">if</span> ((e = getNode(hash(key), key)) != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">        ((v = e.value) == oldValue || (v != <span class="keyword">null</span> &amp;&amp; v.equals(oldValue)))) &#123;</span><br><span class="line">        e.value = newValue;</span><br><span class="line">        afterNodeAccess(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªreplaceä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåªæœ‰å½“keyåŒ¹é…ä¸”oldValueç­‰äºHashMapä¸­é”®å€¼å¯¹çš„å€¼æ—¶ï¼Œæ‰ä½¿ç”¨newValueè¿›è¡Œæ›¿æ¢ã€‚</p></blockquote><p>æœ¬æ–‡å‚è€ƒè‡ªï¼š</p><ul><li><p>[1] <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1LJ411W7dP">å°åˆ˜è®²æºç </a></p></li><li><p>[2] <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38616503/article/details/111218480">Javaè¿›é˜¶ä¹‹HashMap</a></p></li></ul></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆå…­ï¼‰-HashMapæºç è§£è¯»</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://sutianxin.gitee.io/posts/717860798.html">https://sutianxin.gitee.io/posts/717860798.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display:inline-block;width:120px"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>å¤©æ˜•</h></div></div><div class="post-copyright-c" style="display:inline-block;width:120px"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2021-02-18</h></div></div><div class="post-copyright-u" style="display:inline-block;width:120px"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2021-02-18</h></div></div><div class="post-copyright-c" style="display:inline-block;width:120px"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E2%98%95Java/">â˜•Java</a><a class="post-meta__tags" href="/tags/%F0%9F%92%BB%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/">ğŸ’»åç«¯å­¦ä¹ </a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210218195324.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/2120398077.html"><img class="prev-cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210222150135.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Spring-Cloudå­¦ä¹ ï¼ˆå…­ï¼‰-Sentinel</div></div></a></div><div class="next-post pull-right"><a href="/posts/3410178450.html"><img class="next-cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210217153355.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆäº”ï¼‰-é›ªèŠ±ç®—æ³•ç”Ÿæˆå”¯ä¸€ID</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/2938255980.html" title="Javaåº”ç”¨å­¦ä¹ ï¼ˆäºŒï¼‰-Springbootæ•´åˆswagger/swagger-Bootstrap-UIä½¿ç”¨"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210208120213.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-12</div><div class="title">Javaåº”ç”¨å­¦ä¹ ï¼ˆäºŒï¼‰-Springbootæ•´åˆswagger/swagger-Bootstrap-UIä½¿ç”¨</div></div></a></div><div><a href="/posts/3873979871.html" title="Rediså­¦ä¹ æ‰‹å†Œï¼ˆä¸‰ï¼‰--é…ç½®æ–‡ä»¶ã€æŒä¹…åŒ–ä¸å­˜å‚¨éªŒè¯ç "><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210208115927.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-04</div><div class="title">Rediså­¦ä¹ æ‰‹å†Œï¼ˆä¸‰ï¼‰--é…ç½®æ–‡ä»¶ã€æŒä¹…åŒ–ä¸å­˜å‚¨éªŒè¯ç </div></div></a></div><div><a href="/posts/2863462089.html" title="Spring Cloudå­¦ä¹ ï¼ˆäºŒï¼‰-OpenFeignå¾®æœåŠ¡è°ƒç”¨"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210211212103.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-11</div><div class="title">Spring Cloudå­¦ä¹ ï¼ˆäºŒï¼‰-OpenFeignå¾®æœåŠ¡è°ƒç”¨</div></div></a></div><div><a href="/posts/995752607.html" title="Spring Cloudå­¦ä¹ ï¼ˆå››ï¼‰-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210214225250.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-14</div><div class="title">Spring Cloudå­¦ä¹ ï¼ˆå››ï¼‰-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ</div></div></a></div><div><a href="/posts/650479038.html" title="åœ¨çº¿æ•™è‚²é¡¹ç›®æ€»ç»“ï¼ˆäºŒï¼‰-ç”¨æˆ·è®¤è¯"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210205204706.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-05</div><div class="title">åœ¨çº¿æ•™è‚²é¡¹ç›®æ€»ç»“ï¼ˆäºŒï¼‰-ç”¨æˆ·è®¤è¯</div></div></a></div><div><a href="/posts/3227196086.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆä¸€ï¼‰--å•é“¾è¡¨ç›¸å…³ç®—æ³•"><img class="cover" data-lazy-src="https://gitee.com/sutianxin/my-hexo-blog-photo/raw/master/20210208115553.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-07</div><div class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•å­¦ä¹ ï¼ˆä¸€ï¼‰--å•é“¾è¡¨ç›¸å…³ç®—æ³•</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8"><span class="toc-text">1ã€é›†åˆå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-text">1.1ã€æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E5%AF%B9%E6%AF%94"><span class="toc-text">1.2ã€å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81HashMap%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1.3ã€HashMapçš„åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E3%80%81Hash%E5%92%8CHash%E7%AE%97%E6%B3%95"><span class="toc-text">1.4ã€Hashå’ŒHashç®—æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81HashMap%E5%8E%9F%E7%90%86"><span class="toc-text">2ã€HashMapåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81HashMap%E7%9A%84%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-text">2.1ã€HashMapçš„ç»§æ‰¿ä½“ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.3ã€åº•å±‚æ•°æ®ç»“æ„ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81Hash%E8%A1%A8%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E7%AE%97%E6%B3%95%E8%AE%A1%E7%AE%97hash%E5%80%BC%EF%BC%9F"><span class="toc-text">2.4ã€Hashè¡¨ä½¿ç”¨ä»€ä¹ˆç®—æ³•è®¡ç®—hashå€¼ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5%E3%80%81put%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text">2.5ã€putæ•°æ®åŸç†åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFHash%E7%A2%B0%E6%92%9E"><span class="toc-text">2.6ã€ä»€ä¹ˆæ˜¯Hashç¢°æ’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7%E3%80%81%E4%BB%80%E4%B9%88%E5%BC%95%E5%85%A5%E7%BA%A2%E9%BB%91%E6%A0%91%EF%BC%9F"><span class="toc-text">2.7ã€ä»€ä¹ˆå¼•å…¥çº¢é»‘æ ‘ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81HashMap%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">3ã€HashMapæºç åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E6%A0%B8%E5%BF%83%E5%B1%9E%E6%80%A7%E5%88%86%E6%9E%90"><span class="toc-text">3.1ã€æ ¸å¿ƒå±æ€§åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.2ã€æ„é€ æ–¹æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81put%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.3ã€putæ–¹æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E3%80%81resize%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.4ã€resizeæ‰©å®¹æ–¹æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E3%80%81get%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.5ã€getæ–¹æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6%E3%80%81remove%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.6ã€removeæ–¹æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7%E3%80%81replace%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-text">3.7ã€replaceæ–¹æ³•åˆ†æ</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 <i style="color:#ff6a6a;animation:announ_animation .8s linear infinite" class="fa fa-heartbeat"></i> å¤©æ˜•</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢!<span id="runtime"></span><br></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender"></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr"></a><a class="github-badge" target="_blank" href="https://gitee.com/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Picture-Gitee-0cedbe?style=flat&amp;logo=Gitee"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris"></a></p><div id="workboard"></div><script async src="/js/runtime.js"></script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç°¡</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'njAcw6x6upVwkaoOmpXMCViP-9Nh9j0Va',
      appKey: 'SWunI7inOAgenwFSMepoOBkS',
      placeholder: 'è®°å¾—ç•™ä¸‹ä½ çš„æ˜µç§°å’Œé‚®ç®±....å¯ä»¥å¿«é€Ÿæ”¶åˆ°å›å¤',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: {"tieba_new-1":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/1.png","tieba_new-10":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/10.png","tieba_new-100":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/100.png","tieba_new-101":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/101.png","tieba_new-102":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/102.png","tieba_new-103":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/103.png","tieba_new-104":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/104.png","tieba_new-105":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/105.png","tieba_new-106":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/106.png","tieba_new-107":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/107.png","tieba_new-108":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/108.png","tieba_new-109":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/109.png","tieba_new-11":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/11.png","tieba_new-12":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/12.png","tieba_new-13":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/13.png","tieba_new-14":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/14.png","tieba_new-15":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/15.png","tieba_new-16":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/16.png","tieba_new-17":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/17.png","tieba_new-18":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/18.png","tieba_new-19":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/19.png","tieba_new-2":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/2.png","tieba_new-20":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/20.png","tieba_new-21":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/21.png","tieba_new-22":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/22.png","tieba_new-23":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/23.png","tieba_new-24":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/24.png","tieba_new-25":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/25.png","tieba_new-26":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/26.png","tieba_new-27":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/27.png","tieba_new-28":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/28.png","tieba_new-29":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/29.png","tieba_new-3":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/3.png","tieba_new-30":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/30.png","tieba_new-31":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/31.png","tieba_new-32":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/32.png","tieba_new-33":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/33.png","tieba_new-34":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/34.png","tieba_new-35":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/35.png","tieba_new-36":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/36.png","tieba_new-37":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/37.png","tieba_new-38":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/38.png","tieba_new-39":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/39.png","tieba_new-4":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/4.png","tieba_new-40":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/40.png","tieba_new-41":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/41.png","tieba_new-42":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/42.png","tieba_new-43":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/43.png","tieba_new-44":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/44.png","tieba_new-45":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/45.png","tieba_new-46":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/46.png","tieba_new-47":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/47.png","tieba_new-48":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/48.png","tieba_new-49":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/49.png","tieba_new-5":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/5.png","tieba_new-50":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/50.png","tieba_new-51":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/51.png","tieba_new-52":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/52.png","tieba_new-53":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/53.png","tieba_new-54":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/54.png","tieba_new-55":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/55.png","tieba_new-56":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/56.png","tieba_new-57":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/57.png","tieba_new-58":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/58.png","tieba_new-59":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/59.png","tieba_new-6":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/6.png","tieba_new-60":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/60.png","tieba_new-61":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/61.png","tieba_new-62":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/62.png","tieba_new-63":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/63.png","tieba_new-64":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/64.png","tieba_new-65":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/65.png","tieba_new-66":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/66.png","tieba_new-67":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/67.png","tieba_new-68":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/68.png","tieba_new-69":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/69.png","tieba_new-7":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/7.png","tieba_new-70":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/70.png","tieba_new-71":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/71.png","tieba_new-72":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/72.png","tieba_new-73":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/73.png","tieba_new-74":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/74.png","tieba_new-75":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/75.png","tieba_new-76":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/76.png","tieba_new-77":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/77.png","tieba_new-78":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/78.png","tieba_new-79":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/79.png","tieba_new-8":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/8.png","tieba_new-80":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/80.png","tieba_new-81":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/81.png","tieba_new-82":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/82.png","tieba_new-83":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/83.png","tieba_new-84":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/84.png","tieba_new-85":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/85.png","tieba_new-86":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/86.png","tieba_new-87":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/87.png","tieba_new-88":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/88.png","tieba_new-89":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/89.png","tieba_new-9":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/9.png","tieba_new-90":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/90.png","tieba_new-91":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/91.png","tieba_new-92":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/92.png","tieba_new-93":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/93.png","tieba_new-94":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/94.png","tieba_new-95":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/95.png","tieba_new-96":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/96.png","tieba_new-97":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/97.png","tieba_new-98":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/98.png","tieba_new-99":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/tieba_new/99.png","è›†éŸ³å¨˜-OK":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/OK.png","è›†éŸ³å¨˜-die":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/die.png","è›†éŸ³å¨˜-å·çœ‹":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å·çœ‹.png","è›†éŸ³å¨˜-å–èŒ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å–èŒ.png","è›†éŸ³å¨˜-åƒæƒŠ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/åƒæƒŠ.png","è›†éŸ³å¨˜-åƒç“œç¾¤ä¼—":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/åƒç“œç¾¤ä¼—.png","è›†éŸ³å¨˜-åè¡€":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/åè¡€.png","è›†éŸ³å¨˜-å“­æ³£":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å“­æ³£.png","è›†éŸ³å¨˜-å“¼":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å“¼.png","è›†éŸ³å¨˜-å¤§ç¬‘":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å¤§ç¬‘.png","è›†éŸ³å¨˜-å®³æ€•":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/å®³æ€•.png","è›†éŸ³å¨˜-æ‰¶é¢":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/æ‰¶é¢.png","è›†éŸ³å¨˜-æ‘‡å¤´":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/æ‘‡å¤´.png","è›†éŸ³å¨˜-æ— è¯­":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/æ— è¯­.png","è›†éŸ³å¨˜-æœºæ™º":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/æœºæ™º.png","è›†éŸ³å¨˜-æ»‘ç¨½":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/æ»‘ç¨½.png","è›†éŸ³å¨˜-ç”Ÿæ°”":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/ç”Ÿæ°”.png","è›†éŸ³å¨˜-ç–‘é—®":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/ç–‘é—®.png","è›†éŸ³å¨˜-ç¡è§‰è§‰":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/ç¡è§‰è§‰.png","è›†éŸ³å¨˜-è‚¥çš‚":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/è›†éŸ³å¨˜/è‚¥çš‚.png","æ´›å¤©ä¾-å‚²å¨‡":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å‚²å¨‡.png","æ´›å¤©ä¾-å†·æ¼ ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å†·æ¼ .png","æ´›å¤©ä¾-å‰æ’":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å‰æ’.png","æ´›å¤©ä¾-å»å§":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å»å§.png","æ´›å¤©ä¾-å¯ä»¥":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å¯ä»¥.png","æ´›å¤©ä¾-åƒåŒ…ç¾¤ä¼—":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/åƒåŒ…ç¾¤ä¼—.png","æ´›å¤©ä¾-åƒè¯":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/åƒè¯.png","æ´›å¤©ä¾-å“ˆå“ˆå“ˆ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/å“ˆå“ˆå“ˆ.png","æ´›å¤©ä¾-æ‰“å°»":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/æ‰“å°».png","æ´›å¤©ä¾-æ€æ¡Œ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/æ€æ¡Œ.png","æ´›å¤©ä¾-æ— è¨€ä»¥å¯¹":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/æ— è¨€ä»¥å¯¹.png","æ´›å¤©ä¾-æ¶ˆç­ä½ ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/æ¶ˆç­ä½ .png","æ´›å¤©ä¾-æ»‘ç¨½":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/æ»‘ç¨½.png","æ´›å¤©ä¾-çˆ±ä½ å“¦":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/çˆ±ä½ å“¦.png","æ´›å¤©ä¾-çœ‹é€ä¸€åˆ‡":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/çœ‹é€ä¸€åˆ‡.png","æ´›å¤©ä¾-é˜´é˜³å…ˆç”Ÿ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/é˜´é˜³å…ˆç”Ÿ.png","æ´›å¤©ä¾-ï¼Ÿï¼Ÿï¼Ÿ":"https://cdn.jsdelivr.net/gh/Dreamy-TZK/iemotion-pic@latest/img/æ´›å¤©ä¾/ï¼Ÿï¼Ÿï¼Ÿ.png"},
      enableQQ: true,
      path: window.location.pathname,
      master: '1d7070e15b34b3cd1a91d41ce3b1d3a8'.split(','),
      friends: 'e46e13166ac0104c61edac912f7097b0,7e25bd7f91f481054151c374219edce9,36605797c792cd1a097aab58812cae89'.split(','),
      tagMeta: 'åšä¸»,å°ä¼™ä¼´,è®¿å®¢'.split(',')
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><div class="aplayer no-destroy" data-id="6588965546" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script defer src="/live2d-widget/autoload.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/flipcountdown.js"></script><script data-pjax src="/js/runtime.js"></script><script async src="//at.alicdn.com/t/font_2264842_3izu8i5eoc2.js"></script><script data-pjax src="/js/Lete.js"></script><script data-pjax src="/js/calendar.js"></script><script data-pjax src="/js/languages.js"></script><script src="https://apip.weatherdt.com/simple/static/js/weather-simple-common.js?v=2.0"></script><script src="/js/weather.js"></script><script src="/js/custom/runtime.js"></script><script data-pjax src="https://unpkg.com/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/shuoshuo/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax], .pjax-reload script').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div></body></html>